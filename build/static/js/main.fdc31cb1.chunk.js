(this.webpackJsonphotel_technika=this.webpackJsonphotel_technika||[]).push([[0],{126:function(e,t,a){},143:function(e,t,a){e.exports=a.p+"static/media/landing.d7ec6234.jpg"},144:function(e,t,a){e.exports=a.p+"static/media/register.f6749a4c.jpg"},145:function(e,t,a){e.exports=a.p+"static/media/booking.ded9f77f.jpg"},146:function(e,t,a){e.exports=a.p+"static/media/activities.44153d40.jpg"},147:function(e,t,a){e.exports=a.p+"static/media/staff.7b8fe044.jpg"},148:function(e,t,a){e.exports=a.p+"static/media/room.8b9a8162.jpg"},149:function(e,t,a){e.exports=a.p+"static/media/guest.ef874ee4.jpg"},150:function(e,t,a){e.exports=a.p+"static/media/reservation.f6920349.jpg"},179:function(e,t,a){e.exports=a(198)},184:function(e,t,a){},196:function(e,t,a){},198:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(15),c=a.n(l),o=(a(184),a(13)),i=a(273),s=a(272),u=a(156),m=Object(u.a)({palette:{primary:{main:"#424242",light:"#6d6d6d",dark:"#1b1b1b",contrastText:"#ffa000"},secondary:{main:"#ffeb3b",contrastText:"#000000"},background:{paper:"#fff",default:"#e1e2e1",grid:"#F5F5F6"}},overrides:{MuiTableCell:{root:{},hover:{}}}}),d=a(64),b=a(7),f={authUser:null},p=function(e,t){return Object(b.a)(Object(b.a)({},e),{},{authUser:t.authUser})};var g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_USER_SET":return p(e,t);default:return e}},E=a(9),h={user:null},v=function(e,t){return Object(b.a)(Object(b.a)({},e),{},{users:t.users})},O=function(e,t){return Object(b.a)(Object(b.a)({},e),{},{users:Object(b.a)(Object(b.a)({},e.users),{},Object(E.a)({},t.uid,t.user))})};var j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USERS_SET":return v(e,t);case"USER_SET":return O(e,t);default:return e}},k={messages:null,limit:5},S=function(e,t){return Object(b.a)(Object(b.a)({},e),{},{messages:t.messages})},y=function(e,t){return Object(b.a)(Object(b.a)({},e),{},{limit:t.limit})};var C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MESSAGES_SET":return S(e,t);case"MESSAGES_LIMIT_SET":return y(e,t);default:return e}},N={rooms:null},x=function(e,t){return Object(b.a)(Object(b.a)({},e),{},{rooms:t.rooms})};var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ROOMS_SET":return x(e,t);default:return e}},D={guests:null},I=function(e,t){return Object(b.a)(Object(b.a)({},e),{},{guests:t.guests})};var F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GUESTS_SET":return I(e,t);default:return e}},R={bookings:null},P=function(e,t){return Object(b.a)(Object(b.a)({},e),{},{bookings:t.bookings})};var T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BOOKINGS_SET":return P(e,t);default:return e}},B=Object(d.b)({sessionState:g,userState:j,messageState:C,roomState:w,guestState:F,bookingState:T}),A=Object(d.c)(B),U=a(14),G=a(25),M=a(17),L=r.a.createContext(null),z=function(e){return function(t){return r.a.createElement(L.Consumer,null,(function(a){return r.a.createElement(e,Object.assign({},t,{firebase:a}))}))}},W=L,_=a(31),K=a(75),H=(a(189),a(191),{apiKey:"AIzaSyBgS8bNO-TDO08ZsggsG4z-C3_QinKFtDI",authDomain:"hotel-technika.firebaseapp.com",databaseURL:"https://hotel-technika.firebaseio.com",projectId:"hotel-technika",storageBucket:"hotel-technika.appspot.com",messagingSenderId:"823010218984",appId:"1:823010218984:web:31b5a0f257547592018a5d"}),Q=function e(){var t=this;Object(_.a)(this,e),this.doCreateUserWithEmailAndPassword=function(e,a){return t.auth.createUserWithEmailAndPassword(e,a)},this.doSignInWithEmailAndPassword=function(e,a){return t.auth.signInWithEmailAndPassword(e,a)},this.doSignOut=function(){return t.auth.signOut()},this.doPasswordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.doPasswordUpdate=function(e){return t.auth.currentUser.updatePassword(e)},this.changeEmail=function(e){return t.auth.currentUser.updateEmail(e)},this.user=function(e){return t.db.ref("users/".concat(e))},this.users=function(){return t.db.ref("users")},this.saveData=function(e,a){return t.db.ref("/".concat(a)).push(e)},this.saveDataReturnKey=function(e,a){return t.db.ref("/".concat(a)).push(e).key},this.fetch=function(e){return t.db.ref("".concat(e))},this.fetchId=function(e,a){return t.db.ref("".concat(e,"/").concat(a))},this.message=function(e){return t.db.ref("messages/".concat(e))},this.messages=function(){return t.db.ref("messages")},this.onAuthUserListener=function(e,a){return t.auth.onAuthStateChanged((function(n){n?t.user(n.uid).once("value").then((function(t){var a=t.val();a.roles||(a.roles={}),n=Object(b.a)({uid:n.uid,email:n.email},a),e(n)})):a()}))},K.initializeApp(H),this.serverValue=K.database.ServerValue,this.auth=K.auth(),this.db=K.database()},V=a(4),q=a(236),J=z((function(e){var t=e.firebase;return r.a.createElement(q.a,{color:"secondary",variant:"contained",type:"button",onClick:t.doSignOut,size:"small"},"Sign Out")})),$=(a(126),a(56)),Y="/home",Z="/rooms",X=function(e){var t=e.authUser;return r.a.createElement($.a,{className:"navigation"},(!!t.roles.ADMIN||!!t.roles.STAFF)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(U.b,{to:"/register"},"Register"),r.a.createElement(U.b,{to:"/bookings"},"Bookings"),r.a.createElement(U.b,{to:"/guests"},"Guests")),!!t.roles.ADMIN&&r.a.createElement(r.a.Fragment,null,r.a.createElement(U.b,{to:Z},"Rooms"),r.a.createElement(U.b,{to:"/staff"},"Staff")),r.a.createElement(U.b,{to:"/reservations"},"Reservations"),r.a.createElement(U.b,{to:"/account"},"Account"),r.a.createElement(J,null))},ee=function(){return r.a.createElement($.a,{className:"navigation"},r.a.createElement(U.b,{to:"/"},"Landing"),r.a.createElement(U.b,{to:"/signin"},"Sign In"))},te=Object(o.b)((function(e){return{authUser:e.sessionState.authUser}}))((function(e){var t=e.authUser;return t?r.a.createElement(X,{authUser:t}):r.a.createElement(ee,null)})),ae=a(239),ne=a(244),re=a(245),le=a(277),ce=a(200),oe=a(278),ie=a(142),se=a.n(ie),ue=a(240),me=a(243),de=a(199),be=a(241),fe=a(242),pe=a(138),ge=a.n(pe),Ee=a(136),he=a.n(Ee),ve=a(137),Oe=a.n(ve),je=a(139),ke=a.n(je),Se=a(133),ye=a.n(Se),Ce=a(134),Ne=a.n(Ce),xe=a(135),we=a.n(xe),De=a(141),Ie=a.n(De),Fe=a(140),Re=a.n(Fe),Pe=Object(ae.a)({list:{width:250},fullList:{width:"auto"}}),Te=function(e){var t=e.authUser,a=e.setOpen,n=Pe();return r.a.createElement("div",{className:n.list,role:"presentation",onClick:function(){return a(!1)},onKeyDown:function(){return a(!1)}},(!!t.roles.ADMIN||!!t.roles.STAFF)&&r.a.createElement(ue.a,null,r.a.createElement(de.a,{button:!0},r.a.createElement(be.a,null,r.a.createElement(ye.a,null)),r.a.createElement(fe.a,null,r.a.createElement(U.b,{to:"/register"},"Register"))),r.a.createElement(de.a,{button:!0},r.a.createElement(be.a,null,r.a.createElement(Ne.a,null)),r.a.createElement(fe.a,null,r.a.createElement(U.b,{to:"/bookings"},"Bookings"))),r.a.createElement(de.a,{button:!0},r.a.createElement(be.a,null,r.a.createElement(we.a,null)),r.a.createElement(fe.a,null,r.a.createElement(U.b,{to:"/guests"},"Guests")))),r.a.createElement(me.a,null),!!t.roles.ADMIN&&r.a.createElement(ue.a,null,r.a.createElement(de.a,{button:!0},r.a.createElement(be.a,null,r.a.createElement(he.a,null)),r.a.createElement(fe.a,null,r.a.createElement(U.b,{to:Z},"Rooms"))),r.a.createElement(de.a,{button:!0},r.a.createElement(be.a,null,r.a.createElement(Oe.a,null)),r.a.createElement(fe.a,null,r.a.createElement(U.b,{to:"/staff"},"Staff")))),r.a.createElement(me.a,null),r.a.createElement(ue.a,null,r.a.createElement(de.a,{button:!0},r.a.createElement(be.a,null,r.a.createElement(ge.a,null)),r.a.createElement(fe.a,null,r.a.createElement(U.b,{to:"/reservations"},"Reservations"))),r.a.createElement(de.a,{button:!0},r.a.createElement(be.a,null,r.a.createElement(ke.a,null)),r.a.createElement(fe.a,null,r.a.createElement(U.b,{to:"/account"},"Account"))),r.a.createElement(de.a,{button:!0},r.a.createElement(J,null))))},Be=function(e){var t=e.setOpen,a=Pe();return r.a.createElement("div",{className:a.list,role:"presentation",onClick:function(){return t(!1)},onKeyDown:function(){return t(!1)}},r.a.createElement(ue.a,null,r.a.createElement(de.a,{button:!0},r.a.createElement(be.a,null,r.a.createElement(Re.a,null)),r.a.createElement(fe.a,null,r.a.createElement(U.b,{to:"/"},"Landing"))),r.a.createElement(de.a,{button:!0},r.a.createElement(be.a,null,r.a.createElement(Ie.a,null)),r.a.createElement(fe.a,null,r.a.createElement(U.b,{to:"/signin"},"Sign In")))),r.a.createElement(me.a,null))},Ae=Object(o.b)((function(e){return{authUser:e.sessionState.authUser}}))((function(e){var t=e.authUser,a=e.setOpen;return t?r.a.createElement(Te,{authUser:t,setOpen:a}):r.a.createElement(Be,{setOpen:a})})),Ue=Object(ae.a)((function(e){return{root:{flexGrow:1,marginBottom:"15px"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},link:{"text-decoration":"none",color:e.palette.primary.contrastText}}}));var Ge=function(){var e=Ue(),t=r.a.useState(!1),a=Object(V.a)(t,2),n=a[0],l=a[1];return r.a.createElement(ne.a,{position:"static",className:e.root},r.a.createElement(re.a,null,r.a.createElement($.a,{variant:"h5",className:e.title},r.a.createElement(U.b,{to:Y,className:e.link},"Hotel Technika")),r.a.createElement(le.a,{smDown:!0},r.a.createElement(te,null)),r.a.createElement(le.a,{mdUp:!0},r.a.createElement(ce.a,{edge:"end",className:e.menuButton,color:"inherit","aria-label":"menu",onClick:function(){return l(!0)}},r.a.createElement(se.a,null))),r.a.createElement(oe.a,{anchor:"right",open:n,onClose:function(){return l(!1)},onOpen:function(){return l(!0)}},r.a.createElement(Ae,{setOpen:l}))))},Me=a(143),Le=a.n(Me),ze=(a(196),function(){return r.a.createElement("img",{className:"landing",src:Le.a,alt:"Landing page of a Hotel room"})}),We=a(246),_e=a(110),Ke=a(282),He=Object(ae.a)((function(e){return{container:{marginTop:e.spacing(2),padding:e.spacing(2)},TextField:{marginBottom:e.spacing(2)}}}));var Qe=function(){return r.a.createElement("p",null,"Don't have an account ",r.a.createElement(U.b,{to:"/signup"},"Sign Up"))},Ve=Object(M.a)(Object(G.g)(z((function(e){var t=He(),a=Object(n.useState)(""),l=Object(V.a)(a,2),c=l[0],o=l[1],i=Object(n.useState)(""),s=Object(V.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)(""),b=Object(V.a)(d,2),f=b[0],p=b[1],g=Object(n.useState)(""),E=Object(V.a)(g,2),h=E[0],v=E[1],O=Object(n.useState)(!1),j=Object(V.a)(O,2),k=(j[0],j[1]),S=Object(n.useState)(""),y=Object(V.a)(S,2),C=y[0],N=y[1],x=f!==h||""===f||""===u||""===c;return r.a.createElement("form",{onSubmit:function(t){var a={GUEST:"GUEST"};e.firebase.doCreateUserWithEmailAndPassword(u,f).then((function(t){return e.firebase.user(t.user.uid).set({username:c,email:u,roles:a})})).then((function(){o(""),m(""),p(""),v(""),k(!1),e.history.push(Y)})).catch((function(e){N(e)})),t.preventDefault()}},r.a.createElement("div",{className:t.TextField},r.a.createElement(Ke.a,{name:"username",value:c,id:"standard-basic",label:"Username",onChange:function(e){return o(e.target.value)},type:"text"})),r.a.createElement("div",{className:t.TextField},r.a.createElement(Ke.a,{name:"email",value:u,id:"standard-basic",label:"Email",onChange:function(e){return m(e.target.value)},type:"text"})),r.a.createElement("div",{className:t.TextField},r.a.createElement(Ke.a,{name:"passwordOne",value:f,id:"standard-basic",label:"Password",onChange:function(e){return p(e.target.value)},type:"password"})),r.a.createElement("div",{className:t.TextField},r.a.createElement(Ke.a,{name:"passwordTwo",value:h,id:"standard-basic",label:"Confirm Password",onChange:function(e){return v(e.target.value)},type:"password"})),r.a.createElement(q.a,{disabled:x,type:"submit",color:"secondary",variant:"contained"},"Sign Up"),C&&r.a.createElement("p",null,C.message))})))),qe=function(){var e=He();return r.a.createElement(We.a,{maxWidth:"xl"},r.a.createElement(_e.a,{className:e.container},r.a.createElement("h1",null,"Sign Up"),r.a.createElement(Ve,null)))},Je=a(30),$e=a(45),Ye=a(44),Ze={email:"",error:null},Xe=function(e){Object($e.a)(a,e);var t=Object(Ye.a)(a);function a(e){var n;return Object(_.a)(this,a),(n=t.call(this,e)).onsubmit=function(e){var t=n.state.email;n.props.firebase.doPasswordReset(t).then((function(){n.setState(Object(b.a)({},Ze))})).catch((function(e){n.setState({error:e})})),e.preventDefault()},n.onChange=function(e){n.setState(Object(E.a)({},e.target.name,e.target.value))},n.state=Object(b.a)({},Ze),n}return Object(Je.a)(a,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.error,n=""===t;return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{name:"email",value:this.state.email,onChange:this.onChange,type:"text",placeholder:"Email Address"}),r.a.createElement("button",{disabled:n,type:"submit"},"Reset My Password"),a&&r.a.createElement("p",null,a.message))}}]),a}(n.Component),et=function(){return r.a.createElement("p",null,r.a.createElement(U.b,{to:"/pw-forget"},"Forgot Password?"))},tt=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"PasswordForget"),r.a.createElement(at,null))},at=z(Xe),nt=Object(ae.a)((function(e){return{container:{marginTop:e.spacing(2),padding:e.spacing(2)},TextField:{marginBottom:e.spacing(2)}}}));var rt=Object(M.a)(Object(G.g)(z((function(e){var t=Object(n.useState)(""),a=Object(V.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(""),i=Object(V.a)(o,2),s=i[0],u=i[1],m=Object(n.useState)(""),d=Object(V.a)(m,2),b=d[0],f=d[1],p=nt(),g=""===s||""===l;return r.a.createElement("form",{onSubmit:function(t){e.firebase.doSignInWithEmailAndPassword(l,s).then((function(){c(""),u(""),e.history.push(Y)})).catch((function(e){f(e)})),t.preventDefault()}},r.a.createElement("div",{className:p.TextField},r.a.createElement(Ke.a,{name:"email",id:"standard-basic",label:"Email",value:l,onChange:function(e){return c(e.target.value)},type:"text"})),r.a.createElement("div",{className:p.TextField},r.a.createElement(Ke.a,{name:"password",id:"standard-basic",label:"Password",value:s,onChange:function(e){return u(e.target.value)},type:"password"})),r.a.createElement(q.a,{disabled:g,type:"submit",color:"secondary",variant:"contained"},"Sign In"),b&&r.a.createElement("p",null,b.message))})))),lt=function(){var e=nt();return r.a.createElement(We.a,{maxWidth:"xl"},r.a.createElement(_e.a,{className:e.container},r.a.createElement("h1",null,"SignIn"),r.a.createElement(rt,null),r.a.createElement(et,null),r.a.createElement(Qe,null)))},ct=a(111),ot=a(144),it=a.n(ot),st=a(145),ut=a.n(st),mt=a(146),dt=a.n(mt),bt=a(147),ft=a.n(bt),pt=a(148),gt=a.n(pt),Et=a(149),ht=a.n(Et),vt=a(150),Ot=a.n(vt),jt=function(e){var t=function(t){Object($e.a)(n,t);var a=Object(Ye.a)(n);function n(e){var t;return Object(_.a)(this,n),(t=a.call(this,e)).props.onSetAuthUser(JSON.parse(localStorage.getItem("authUser"))),t}return Object(Je.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.listener=this.props.firebase.onAuthUserListener((function(t){localStorage.setItem("authUser",JSON.stringify(t)),e.props.onSetAuthUser(t)}),(function(){localStorage.removeItem("authUser"),e.props.onSetAuthUser(null)}))}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){return r.a.createElement(e,this.props)}}]),n}(r.a.Component);return Object(M.a)(z,Object(o.b)(null,(function(e){return{onSetAuthUser:function(t){return e({type:"AUTH_USER_SET",authUser:t})}}})))(t)},kt=function(e){return function(t){var a=function(a){Object($e.a)(l,a);var n=Object(Ye.a)(l);function l(){return Object(_.a)(this,l),n.apply(this,arguments)}return Object(Je.a)(l,[{key:"componentDidMount",value:function(){var t=this;this.listener=this.props.firebase.onAuthUserListener((function(a){e(a)||t.props.history.push("/signin")}),(function(){return t.props.history.push("/signin")}))}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){return e(this.props.authUser)?r.a.createElement(t,this.props):null}}]),l}(r.a.Component);return Object(M.a)(G.g,z,Object(o.b)((function(e){return{authUser:e.sessionState.authUser}})))(a)}},St=[{url:it.a,title:"Register",width:"31%",link:"/register",auth:["STAFF","ADMIN"]},{url:ut.a,title:"Bookings",width:"31%",link:"/bookings",auth:["STAFF","ADMIN"]},{url:Ot.a,title:"Reservations",width:"31%",link:"/reservations",auth:["GUEST","STAFF","ADMIN"]},{url:dt.a,title:"Activities",width:"31%",link:"/activities",auth:["GUEST","STAFF","ADMIN"]},{url:ft.a,title:"Staff",width:"31%",link:"/staff",auth:"ADMIN"},{url:gt.a,title:"Rooms",width:"31%",link:Z,auth:"ADMIN"},{url:ht.a,title:"Guests",width:"31%",link:"/guests",auth:["STAFF","ADMIN"]}],yt=Object(ae.a)((function(e){var t;return{root:{display:"flex",flexWrap:"wrap",minWidth:300,width:"100%",justifyContent:"center"},image:(t={position:"relative",height:200,margin:5},Object(E.a)(t,e.breakpoints.down("xs"),{width:"100% !important",height:100}),Object(E.a)(t,"&:hover, &$focusVisible",{zIndex:1,"& $imageBackdrop":{opacity:.15},"& $imageTitle":{border:"4px solid currentColor"}}),t),focusVisible:{},imageButton:{position:"absolute",left:0,right:0,top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",color:e.palette.common.white},imageSrc:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundSize:"cover",backgroundPosition:"center 40%"},imageBackdrop:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:e.palette.common.black,opacity:.4,transition:e.transitions.create("opacity")},imageTitle:{position:"relative",padding:"".concat(e.spacing(2),"px ").concat(e.spacing(4),"px ").concat(e.spacing(1)+6,"px")}}})),Ct=Object(M.a)(z,kt((function(e){return!!e})),Object(o.b)((function(e){return{authUser:e.sessionState.authUser}})))((function(e){var t=e.authUser,a=yt(),n=St.filter((function(e){var a=Object.values(t.roles);return e.auth.includes(a[0])}));return r.a.createElement("div",{className:a.root},r.a.createElement("span",{style:{backgroundImage:"./register.jpg"}}),n.map((function(e){return r.a.createElement(ct.a,{focusRipple:!0,key:e.title,className:a.image,focusVisibleClassName:a.focusVisible,style:{width:e.width}},r.a.createElement(U.b,{to:e.link},r.a.createElement("span",{className:a.imageSrc,style:{backgroundImage:"url(".concat(e.url,")")}}),r.a.createElement("span",{className:a.imageBackdrop}),r.a.createElement("span",{className:a.imageButton},r.a.createElement($.a,{component:"span",variant:"subtitle1",color:"inherit",className:a.imageTitle},e.title))))})))})),Nt=function(e){var t=Object(n.useState)(e),a=Object(V.a)(t,2),r=a[0],l=a[1];return{value:r,setValue:l,reset:function(){return l("")},bind:{value:r,onChange:function(e){l(e.target.value)}}}},xt=a(249),wt=a(203),Dt=a(251),It=a(252),Ft=a(279),Rt=Object(ae.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(2),width:300}," & .MuiFormControl-root":{margin:e.spacing(2)}},paper:{padding:e.spacing(2)}}}));var Pt=Object(M.a)(z,kt((function(e){return e&&!!e.roles.ADMIN||!!e.roles.STAFF})))((function(e){var t=Rt(),a=Object(n.useState)(""),l=Object(V.a)(a,2),c=l[0],o=l[1],i=Nt(""),s=i.value,u=i.bind,m=i.reset,d=Nt(""),b=d.value,f=d.bind,p=d.reset,g=Object(n.useState)(""),E=Object(V.a)(g,2),h=E[0],v=E[1],O=Nt(""),j=O.value,k=O.bind,S=O.reset,y=Nt(""),C=y.value,N=y.bind,x=y.reset,w=Nt(""),D=w.value,I=w.bind,F=w.reset,R=Nt(""),P=R.value,T=R.bind,B=R.reset,A=Nt(""),U=A.value,G=A.bind,M=A.reset;return r.a.createElement(We.a,{maxWidth:"md"},r.a.createElement(_e.a,{className:t.paper},r.a.createElement($.a,{variant:"h6",gutterBottom:!0,className:t.title},"Registration"),r.a.createElement($.a,null,"Please ensure all guest registration information is accurate and complete"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault();var a={firstName:s,lastName:b,gender:h,dateOfBirth:j,contactNumber:C,email:D,address:P,postcode:U};e.firebase.saveData(a,"guests").then((function(){alert("Submitting Name \n    ".concat(s," \n    ").concat(b," \n    ").concat(h," \n    ").concat(j," \n    ").concat(C," \n    ").concat(D," \n    ").concat(P," \n    ").concat(U," \n    ")),m(),p(),v(""),S(),x(),F(),B(),M(),e.history.push(Y)})).catch((function(e){o(e)}))},className:t.root},r.a.createElement("div",null,r.a.createElement(Ke.a,Object.assign({name:"firstName",id:"standard-basic",label:"First Name",type:"text"},u)),r.a.createElement(Ke.a,Object.assign({name:"lastName",id:"standard-basic",label:"Last Name",type:"text"},f))),r.a.createElement(Ke.a,Object.assign({name:"dateOfBirth",id:"date",label:"Date Of Birth",type:"date",InputLabelProps:{shrink:!0}},k)),r.a.createElement(xt.a,{component:"fieldset"},r.a.createElement(wt.a,{component:"legend"},"Gender"),r.a.createElement(Dt.a,{row:!0,"aria-label":"gender",name:"gender",value:h,onChange:function(e){v(e.target.value)}},r.a.createElement(It.a,{value:"Female",control:r.a.createElement(Ft.a,null),label:"Female"}),r.a.createElement(It.a,{value:"Male",control:r.a.createElement(Ft.a,null),label:"Male"}),r.a.createElement(It.a,{value:"Other",control:r.a.createElement(Ft.a,null),label:"Other"}))),r.a.createElement("div",null,r.a.createElement(Ke.a,Object.assign({name:"contactNumber",id:"standard-basic",label:"Contact Number",type:"tel"},N)),r.a.createElement(Ke.a,Object.assign({name:"email",id:"standard-basic",label:"Email",type:"email"},I))),r.a.createElement("div",null,r.a.createElement(Ke.a,Object.assign({name:"address",id:"standard-basic",label:"Address",multiline:!0,rows:4,type:"text"},T)),r.a.createElement(Ke.a,Object.assign({name:"postCode",id:"standard-basic",label:"Postcode",type:"text"},G))),r.a.createElement(q.a,{color:"secondary",variant:"contained",type:"submit"},"Submit"),c&&r.a.createElement("p",null,c.message))))})),Tt=Object(ae.a)((function(e){return{form:{display:"flex",flexWrap:"wrap","align-items":"baseline"},headTextField:{marginRight:e.spacing(1),width:"90wv"},textField:{marginRight:e.spacing(1),width:"15wv"},paper:{padding:e.spacing(2)},button:{marginTop:e.spacing(2)}}}));var Bt=z((function(e){var t=e.setFilteredRooms,a=e.rooms,n=e.setCheckInDate,l=e.setCheckOutDate,c=e.numberOfGuests,o=e.setNumberOfGuests,i=e.checkInDate,s=e.checkOutDate,u=Tt(),m=!function(){var e=!1;return new Date(i)<new Date(s)&&(e=!0),e}()||""===c;return r.a.createElement(_e.a,{className:u.paper},r.a.createElement($.a,{variant:"h5",gutterBottom:!0,className:u.title},"Find a Room"),r.a.createElement($.a,null,"Please enter your desired check in and check out dates including the number of your party"),r.a.createElement("form",{className:u.form,onSubmit:function(e){e.preventDefault();var n=a;if(""!==c&&(n=a.filter((function(e){return e.roomCapacity.toString()===c}))),0===n.length){t([{roomName:"Sorry! We have no rooms available"}])}else t(n)}},r.a.createElement(Ke.a,{name:"checkInDate",id:"date",label:"Check In Date",className:u.textField,variant:"filled",type:"date",InputLabelProps:{shrink:!0},onChange:function(e){return n(e.target.value)}}),r.a.createElement(Ke.a,{name:"checkOutDate",id:"date",label:"Check Out Date",type:"date",className:u.textField,variant:"filled",InputLabelProps:{shrink:!0},onChange:function(e){return l(e.target.value)}}),r.a.createElement(Ke.a,{name:"numberOfPeople",id:"filled-margin-none",label:"Number Of People",type:"number",variant:"filled",className:u.textField,onChange:function(e){return o(e.target.value)}}),r.a.createElement($.a,{className:u.textField},function(){var e=new Date(i),t=new Date(s),a=0;return i&&s&&e<t&&(a=Math.round(Math.abs(+e-+t)/864e5)),a}()," Nights"),r.a.createElement(q.a,{disabled:m,className:u.button,color:"secondary",variant:"contained",type:"submit"},"Submit")))})),At=a(259),Ut=a(261),Gt=a(255),Mt=a(258),Lt=a(260),zt=a(254),Wt=a(256),_t=a(274),Kt=a(92),Ht=a.n(Kt),Qt=a(91),Vt=a.n(Qt),qt=a(257),Jt=a(152),$t=a.n(Jt),Yt=a(153),Zt=a.n(Yt),Xt=a(154),ea=a.n(Xt),ta=a(155),aa=a.n(ta),na=a(253);var ra=function(e){var t=e.amenities;return r.a.createElement(r.a.Fragment,null,t.accessibility&&r.a.createElement(na.a,{title:"Wheelchair accessible"},r.a.createElement($t.a,{fontSize:"large"})),t.breakfast&&r.a.createElement(na.a,{title:"Free Breakfast included"},r.a.createElement(Zt.a,{fontSize:"large"})),t.parking&&r.a.createElement(na.a,{title:"Includes Parking"},r.a.createElement(ea.a,{fontSize:"large"})),t.wifi&&r.a.createElement(na.a,{title:"Free Wi-fi"},r.a.createElement(aa.a,{fontSize:"large"})))},la=a(67),ca=a.n(la),oa=a(66),ia=a.n(oa),sa=Object(ae.a)((function(e){return{cell:{display:"flex",justifyContent:"space-around"}}}));var ua=function(e){var t=Object(n.useState)(!1),a=Object(V.a)(t,2),l=a[0],c=a[1],o=e.room,i=e.createBooking,s=sa();return r.a.createElement(r.a.Fragment,null,r.a.createElement(zt.a,null,r.a.createElement(Gt.a,null,o.roomNumber&&r.a.createElement(ce.a,{"aria-label":"expand row",size:"small",onClick:function(){return c(!l)}},l?r.a.createElement(Vt.a,null):r.a.createElement(Ht.a,null))),r.a.createElement(Gt.a,null,o.roomName," "),r.a.createElement(Gt.a,null,o.roomNumber," "),r.a.createElement(Gt.a,null,o.roomCapacity," "),r.a.createElement(Gt.a,{className:s.cell},o.roomNumber&&r.a.createElement(q.a,{color:"secondary",variant:"contained",type:"button",onClick:function(){return i(o)},size:"small"},"Select"))),r.a.createElement(zt.a,null,r.a.createElement(Gt.a,{style:{paddingBottom:0,paddingTop:0},colSpan:6},r.a.createElement(Wt.a,{in:l,timeout:"auto",unmountOnExit:!0},r.a.createElement(qt.a,{container:!0,component:_t.a,className:s.grid},r.a.createElement(qt.a,{item:!0,xs:6},r.a.createElement($.a,{gutterBottom:!0,component:"div"},"Amenities"),r.a.createElement(ra,{amenities:o.amenities})),r.a.createElement(qt.a,{item:!0,xs:6},r.a.createElement($.a,{gutterBottom:!0,component:"div"},"Beds"),r.a.createElement(ue.a,null,o.beds.map((function(e,t){return r.a.createElement(de.a,{key:t},r.a.createElement(be.a,null,"Single"===e?r.a.createElement(ia.a,null):r.a.createElement(ca.a,null)),r.a.createElement(fe.a,{primary:e}))})))))))))},ma=Object(ae.a)((function(e){return{table:{minWidth:650},container:{marginTop:e.spacing(2)},title:{padding:e.spacing(2)}}}));var da=function(e){var t=e.filteredRooms,a=e.createBooking,n=ma();return r.a.createElement(Mt.a,{component:_e.a,className:n.container},r.a.createElement($.a,{variant:"h5",gutterBottom:!0,className:n.title},"Available Rooms"),r.a.createElement(At.a,{className:n.table,"aria-label":"simple table"},r.a.createElement(Lt.a,null,r.a.createElement(zt.a,null,r.a.createElement(Gt.a,null),r.a.createElement(Gt.a,null,"Room Name"),r.a.createElement(Gt.a,null,"Room Number"),r.a.createElement(Gt.a,null,"Room Capacity"),r.a.createElement(Gt.a,null))),r.a.createElement(Ut.a,null,t&&t.map((function(e){return r.a.createElement(ua,{key:e.uid,room:e,createBooking:a})})))))};var ba=Object(M.a)(z,kt((function(e){return e&&!!e.roles.ADMIN||e&&!!e.roles.STAFF})))((function(e){var t=Object(o.d)((function(e){return{rooms:Object.keys(e.roomState.rooms||{}).map((function(t){return Object(b.a)(Object(b.a)({},e.roomState.rooms[t]),{},{uid:t})}))}})).rooms,a=Object(n.useState)(""),l=Object(V.a)(a,2),c=l[0],i=l[1],s=Object(n.useState)(""),u=Object(V.a)(s,2),m=u[0],d=u[1],f=Object(n.useState)(""),p=Object(V.a)(f,2),g=p[0],E=p[1],h=Object(n.useState)("Started"),v=Object(V.a)(h,1)[0],O=Object(n.useState)(""),j=Object(V.a)(O,2),k=j[0],S=j[1];return r.a.createElement(We.a,{maxWidth:"xl"},r.a.createElement(Bt,{setFilteredRooms:i,setCheckInDate:d,setCheckOutDate:E,rooms:t,numberOfGuests:k,setNumberOfGuests:S,checkInDate:m,checkOutDate:g}),c&&r.a.createElement(da,{filteredRooms:c,createBooking:function(t){var a=t.uid,n={checkInDate:m,checkOutDate:g,roomId:a,status:v,numberOfGuests:k};e.firebase.saveData(n,"bookings").then((function(t){e.history.push("".concat("/bookings","/").concat(t.key))}))}}))})),fa=a(18),pa=a(262),ga=a(250),Ea=a(275),ha=a(55),va=a.n(ha),Oa=a(205),ja=a(280),ka=Object(ae.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",flexDirection:"column"},headTextField:{marginRight:e.spacing(1),width:"64vw"},textField:{marginRight:e.spacing(1),width:"20vw"},paper:{padding:e.spacing(2)},button:{marginTop:e.spacing(2)},formControl:{marginBottom:e.spacing(1),display:"flex",flexDirection:"row"},select:{marginBottom:e.spacing(.5),width:"20vw"}}}));var Sa=z((function(e){var t=Object(n.useState)(""),a=Object(V.a)(t,2),l=a[0],c=a[1],o=ka(),i=Nt(""),s=i.value,u=i.bind,m=i.reset,d=Nt(""),f=d.value,p=d.bind,g=d.reset,h=Nt(""),v=h.value,O=h.bind,j=h.reset,k=Object(n.useState)(["Bed 1"]),S=Object(V.a)(k,2),y=S[0],C=S[1],N=Object(n.useState)({accessibility:!1,breakfast:!1,parking:!1,wifi:!1}),x=Object(V.a)(N,2),w=x[0],D=x[1],I=function(e){D(Object(b.a)(Object(b.a)({},w),{},Object(E.a)({},e.target.name,e.target.checked)))},F=function(e){return function(t){t.preventDefault();var a=[].concat(Object(fa.a)(y.slice(0,e)),Object(fa.a)(y.slice(e+1)));C(a)}};return r.a.createElement(_e.a,{className:o.paper},r.a.createElement($.a,{variant:"h6",gutterBottom:!0,className:o.title},"Add a Room"),r.a.createElement("form",{className:o.root,onSubmit:function(t){t.preventDefault();var a=function(){var e=0;console.log("initial",e);for(var t=0;t<y.length;t++)"Single"===y[t]&&(e+=1),console.log("first",e),"Double"!==y[t]&&"Queen"!==y[t]&&"King"!==y[t]||(e+=2),console.log("second",e);return console.log("final",e),e}(),n={roomName:f,roomNumber:s,roomCapacity:a,amenities:w,pricePerNight:v,beds:y};e.firebase.saveData(n,"rooms").then((function(){alert("Submitting Room ".concat(f,", \n    Room number: ").concat(s,",\n    Number of People: ").concat(a," \n    ")),g(),m(),j(),C([]),D({accessibility:!1,breakfast:!1,parking:!1,wifi:!1})})).catch((function(e){c(e)}))}},r.a.createElement(Ke.a,Object.assign({id:"filled-margin-none",label:"Room Name",className:o.headTextField,margin:"normal",variant:"filled"},p)),r.a.createElement("div",null,r.a.createElement(Ke.a,Object.assign({name:"roomNumber",id:"filled-margin-none",label:"Room Number",type:"number",className:o.textField,variant:"filled"},u)),r.a.createElement(Ke.a,Object.assign({name:"pricePerNight",id:"filled-margin-none",label:"Price Per Night",type:"number",variant:"filled",InputProps:{startAdornment:r.a.createElement(pa.a,{position:"start"},"\xa3")},className:o.textField},O))),r.a.createElement(Oa.a,{row:!0},r.a.createElement(It.a,{control:r.a.createElement(ja.a,{checked:w.accessibility,onChange:I,name:"accessibility"}),label:"Accessibility"}),r.a.createElement(It.a,{control:r.a.createElement(ja.a,{checked:w.breakfast,onChange:I,name:"breakfast"}),label:"Breakfast"}),r.a.createElement(It.a,{control:r.a.createElement(ja.a,{checked:w.parking,onChange:I,name:"parking"}),label:"Parking"}),r.a.createElement(It.a,{control:r.a.createElement(ja.a,{checked:w.wifi,onChange:I,name:"wifi"}),label:"Wifi"})),r.a.createElement("div",null,y.map((function(e,t){return r.a.createElement(xt.a,{key:t,variant:"filled",className:o.formControl,size:"small"},r.a.createElement(ga.a,{id:"simple-select-label"},"Beds"),r.a.createElement(Ea.a,{labelId:"simple-select-label",id:"demo-simple-select",value:e,className:o.select,onChange:function(e){return function(e,t){var a=Object(fa.a)(y);a[t]=e.target.value,C(a)}(e,t)}},r.a.createElement("option",{value:"Single"},"Single"),r.a.createElement("option",{value:"Double"},"Double"),r.a.createElement("option",{value:"Queen"},"Queen"),r.a.createElement("option",{value:"King"},"King")),r.a.createElement(ce.a,{color:"primary","aria-label":"remove guest",onClick:F(t)},r.a.createElement(va.a,null)))})),r.a.createElement(q.a,{color:"secondary",variant:"contained",type:"button",size:"small",onClick:function(e){e.preventDefault();var t="Bed ".concat(y.length+1),a=y.concat([t]);C(a)}},"Add a Bed")),r.a.createElement("div",null,r.a.createElement(q.a,{className:o.button,color:"secondary",variant:"contained",type:"submit"},"Submit"),l&&r.a.createElement("p",null,l.message))))})),ya=a(263),Ca=a(264),Na=a(265),xa=a(266),wa=a(267);var Da=function(e){var t=e.openDeleteConfirmation,a=e.setOpenDeleteConfirmation,n=e.room,l=e.onRemoveRoom;return r.a.createElement(ya.a,{open:t,onClose:function(){a(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Ca.a,{id:"alert-dialog-title"},"Confirmation"),r.a.createElement(Na.a,null,r.a.createElement(xa.a,{id:"alert-dialog-description"},"Are you sure you want to Delete ",n.roomName,"?")),r.a.createElement(wa.a,null,r.a.createElement(q.a,{onClick:function(){a(!1)},color:"primary"},"Cancel"),r.a.createElement(q.a,{onClick:function(){return l(n.uid)},color:"primary",autoFocus:!0},"Confirm")))},Ia=Object(ae.a)((function(e){return{cell:{display:"flex",justifyContent:"space-around"},grid:{marginTop:e.spacing(2)},card:{backgroundColor:e.palette.background.default},formControl:{marginBottom:e.spacing(1),display:"flex",flexDirection:"row"},select:{marginBottom:e.spacing(.5),width:"20vw"}}}));var Fa=function(e){var t=e.room,a=e.onRemoveRoom,l=e.onEditRoom,c=Ia(),o=Object(n.useState)(!1),i=Object(V.a)(o,2),s=i[0],u=i[1],m=Object(n.useState)(!1),d=Object(V.a)(m,2),f=d[0],p=d[1],g=Object(n.useState)(!1),h=Object(V.a)(g,2),v=h[0],O=h[1],j=Nt("".concat(t.roomNumber)),k=j.value,S=j.bind,y=Nt("".concat(t.roomName)),C=y.value,N=y.bind,x=Object(n.useState)(""),w=Object(V.a)(x,2),D=w[0],I=w[1],F=r.a.useState({accessibility:!1,breakfast:!1,parking:!1,wifi:!1}),R=Object(V.a)(F,2),P=R[0],T=R[1],B=Object(n.useState)(""),A=Object(V.a)(B,2),U=A[0],G=A[1];function M(){u(!s)}Object(n.useEffect)((function(){I(t.roomCapacity),T(Object(b.a)({},t.amenities)),G(t.beds)}),[]),Object(n.useEffect)((function(){W()}),[U]);var L=function(e){T(Object(b.a)(Object(b.a)({},P),{},Object(E.a)({},e.target.name,e.target.checked)))},z=function(e){return function(t){t.preventDefault();var a=[].concat(Object(fa.a)(U.slice(0,e)),Object(fa.a)(U.slice(e+1)));G(a)}},W=function(){for(var e=0,t=0;t<U.length;t++)"Single"===U[t]&&(e+=1),"Double"!==U[t]&&"Queen"!==U[t]&&"King"!==U[t]||(e+=2);I(e)};return s?r.a.createElement(r.a.Fragment,null,r.a.createElement(zt.a,null,r.a.createElement(Gt.a,null),r.a.createElement(Gt.a,null,r.a.createElement(Ke.a,Object.assign({name:"roomName",id:"filled",label:"Room Name",type:"text",variant:"filled"},N))),r.a.createElement(Gt.a,null,r.a.createElement(Ke.a,Object.assign({name:"roomNumber",id:"filled",label:"Room Number",type:"number",variant:"filled"},S))),r.a.createElement(Gt.a,null,r.a.createElement(Ke.a,{name:"roomCapacity",id:"filled",label:"Room Capacity",type:"number",variant:"filled",value:D,disabled:!0})),r.a.createElement(Gt.a,{className:c.cell},r.a.createElement(q.a,{color:"secondary",variant:"contained",type:"button",onClick:function(){return l(t,{roomName:C,roomNumber:k,roomCapacity:D,amenities:P}),void u(!1)},size:"small"},"Save"),r.a.createElement(q.a,{color:"secondary",variant:"contained",type:"button",onClick:function(){return M()},size:"small"},"Reset"),r.a.createElement(q.a,{color:"secondary",variant:"contained",type:"button",onClick:function(){O(!0)},size:"small"},"Delete"))),r.a.createElement(zt.a,null,r.a.createElement(Gt.a,null),r.a.createElement(Gt.a,{colSpan:6},r.a.createElement(Oa.a,{row:!0},r.a.createElement(It.a,{control:r.a.createElement(ja.a,{checked:P.accessibility,onChange:L,name:"accessibility"}),label:"Accessibility"}),r.a.createElement(It.a,{control:r.a.createElement(ja.a,{checked:P.breakfast,onChange:L,name:"breakfast"}),label:"Breakfast"}),r.a.createElement(It.a,{control:r.a.createElement(ja.a,{checked:P.parking,onChange:L,name:"parking"}),label:"Parking"}),r.a.createElement(It.a,{control:r.a.createElement(ja.a,{checked:P.wifi,onChange:L,name:"wifi"}),label:"Wifi"})))),r.a.createElement(zt.a,null,r.a.createElement(Gt.a,null),r.a.createElement(Gt.a,{colSpan:6},U.map((function(e,t){return r.a.createElement(xt.a,{key:t,variant:"filled",className:c.formControl,size:"small"},r.a.createElement(ga.a,{id:"simple-select-label"},"Beds"),r.a.createElement(Ea.a,{labelId:"simple-select-label",id:"demo-simple-select",value:e,className:c.select,onChange:function(e){return function(e,t){var a=Object(fa.a)(U);a[t]=e.target.value,G(a)}(e,t)}},r.a.createElement("option",{value:"Single"},"Single"),r.a.createElement("option",{value:"Double"},"Double"),r.a.createElement("option",{value:"Queen"},"Queen"),r.a.createElement("option",{value:"King"},"King")),r.a.createElement(ce.a,{color:"primary","aria-label":"remove guest",onClick:z(t)},r.a.createElement(va.a,null)))})),r.a.createElement(q.a,{color:"secondary",variant:"contained",type:"button",size:"small",onClick:function(e){e.preventDefault();var t="Bed ".concat(U.length+1),a=U.concat([t]);G(a)}},"Add a Bed"))),r.a.createElement(Da,{room:t,setOpenDeleteConfirmation:O,onRemoveRoom:a,openDeleteConfirmation:v})):r.a.createElement(r.a.Fragment,null,r.a.createElement(zt.a,null,r.a.createElement(Gt.a,null,r.a.createElement(ce.a,{"aria-label":"expand row",size:"small",onClick:function(){return p(!f)}},f?r.a.createElement(Vt.a,null):r.a.createElement(Ht.a,null))),r.a.createElement(Gt.a,null,r.a.createElement($.a,null,t.roomName)),r.a.createElement(Gt.a,null,t.roomNumber," "),r.a.createElement(Gt.a,null,t.roomCapacity," "),r.a.createElement(Gt.a,null,"\xa3",t.pricePerNight," "),r.a.createElement(Gt.a,{className:c.cell},r.a.createElement(q.a,{color:"secondary",variant:"contained",type:"button",onClick:function(){return M()},size:"small"},"Edit"),r.a.createElement(q.a,{color:"secondary",variant:"contained",type:"button",onClick:function(){O(!0)},size:"small"},"Delete"))),r.a.createElement(zt.a,null,r.a.createElement(Gt.a,{style:{paddingBottom:0,paddingTop:0},colSpan:6},r.a.createElement(Wt.a,{in:f,timeout:"auto",unmountOnExit:!0},r.a.createElement(qt.a,{container:!0,component:_t.a,className:c.grid},r.a.createElement(qt.a,{item:!0,xs:6},r.a.createElement($.a,{gutterBottom:!0,component:"div"},"Amenities"),r.a.createElement(ra,{amenities:t.amenities})),r.a.createElement(qt.a,{item:!0,xs:6},r.a.createElement($.a,{gutterBottom:!0,component:"div"},"Beds"),r.a.createElement(ue.a,null,t.beds.map((function(e,t){return r.a.createElement(de.a,{key:t},r.a.createElement(be.a,null,"Single"===e?r.a.createElement(ia.a,null):r.a.createElement(ca.a,null)),r.a.createElement(fe.a,{primary:e}))})))))))),r.a.createElement(Da,{room:t,setOpenDeleteConfirmation:O,onRemoveRoom:a,openDeleteConfirmation:v}))};var Ra=function(){return r.a.createElement(zt.a,null,r.a.createElement(Gt.a,null,"Loading ..."))},Pa=Object(ae.a)((function(e){return{table:{minWidth:650},container:{marginTop:e.spacing(2)}}}));var Ta=function(e){var t=e.loading,a=e.rooms,n=e.onRemoveRoom,l=e.onEditRoom,c=Pa();return r.a.createElement(Mt.a,{component:_e.a,className:c.container},r.a.createElement(At.a,{className:c.table,"aria-label":"simple table"},r.a.createElement(Lt.a,null,r.a.createElement(zt.a,null,r.a.createElement(Gt.a,null),r.a.createElement(Gt.a,null,"Room Name"),r.a.createElement(Gt.a,null,"Room Number"),r.a.createElement(Gt.a,null,"Room Capacity"),r.a.createElement(Gt.a,null,"Price Per Night"),r.a.createElement(Gt.a,null))),r.a.createElement(Ut.a,null,t&&r.a.createElement(Ra,null),a&&a.map((function(e){return r.a.createElement(Fa,{key:e.uid,room:e,onRemoveRoom:n,onEditRoom:l})})))))};var Ba=Object(M.a)(z,kt((function(e){return e&&!!e.roles.ADMIN||e&&!!e.roles.STAFF})))((function(e){var t=Object(n.useState)(!1),a=Object(V.a)(t,2),l=a[0],c=a[1],i=Object(o.d)((function(e){return{rooms:Object.keys(e.roomState.rooms||{}).map((function(t){return Object(b.a)(Object(b.a)({},e.roomState.rooms[t]),{},{uid:t})}))}})).rooms,s=Object(o.c)();return Object(n.useEffect)((function(){return i.length||c(!0),c(!0),e.firebase.fetch("rooms").on("value",(function(e){!function(e){s({type:"ROOMS_SET",rooms:e})}(e.val()),c(!1)})),function(){e.firebase.fetch("rooms").off()}}),[]),r.a.createElement(We.a,{maxWidth:"xl"},r.a.createElement(Sa,null),r.a.createElement(Ta,{loading:l,rooms:i.map((function(e){return Object(b.a)({},e)})),onRemoveRoom:function(t){e.firebase.fetchId("rooms",t).remove()},onEditRoom:function(t,a){e.firebase.fetchId("rooms",t.uid).set(Object(b.a)({},a))}}))})),Aa=a(268),Ua=a(269),Ga=a(270),Ma=a(271),La=a(276),za=Object(ae.a)((function(e){return{root:{backgroundColor:e.palette.background.grid,padding:e.spacing(1)},paper:{padding:e.spacing(2)},textField:{paddingRight:e.spacing(2)},grid:{padding:e.spacing(2)},box:{width:"40wv",display:"flex"},card:{marginTop:e.spacing(2)}}}));var Wa=function(e){var t=e.booking,a=e.guests,n=e.onToggleEditMode,l=e.error,c=e.handleSubmit,i=e.addGuest,s=e.handleGuest,u=e.handleDeleteGuest,m=e.selectedGuests,d=e.checkInDate,f=e.checkOutDate,p=e.setCheckInDate,g=e.setCheckOutDate,E=e.setRoom,h=e.room,v=e.numberOfGuests,O=e.setNumberOfGuests,j=e.reservationMode,k=e.status,S=e.setStatus,y=za(),C=Object(o.d)((function(e){return{rooms:Object.keys(e.roomState.rooms||{}).map((function(t){return Object(b.a)(Object(b.a)({},e.roomState.rooms[t]),{},{uid:t})}))}})).rooms;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(qt.a,{container:!0,spacing:3,component:_e.a,className:y.root},j?null:r.a.createElement(qt.a,{item:!0,xs:12},r.a.createElement($.a,{variant:"h4"},"Confirm details")),r.a.createElement(qt.a,{item:!0,xs:6},r.a.createElement(Aa.a,null,r.a.createElement(Ua.a,null,r.a.createElement($.a,null,"Booking Details"),r.a.createElement(Ke.a,{name:"checkInDate",id:"date",label:"Check In Date",className:y.textField,variant:"filled",type:"date",value:d,InputLabelProps:{shrink:!0},onChange:function(e){return p(e.target.value)}}),r.a.createElement(Ke.a,{name:"checkOutDate",id:"date",label:"Check Out Date",type:"date",className:y.textField,variant:"filled",value:f,InputLabelProps:{shrink:!0},onChange:function(e){return g(e.target.value)}}),r.a.createElement(Ke.a,{disabled:!0,name:"numberOfPeople",id:"filled-margin-none",label:"Number Of People",type:"number",variant:"filled",className:y.textField,onChange:function(e){return O(e.target.value)},value:v,InputLabelProps:{shrink:!0}}))),r.a.createElement(Aa.a,{className:y.card},r.a.createElement(Ua.a,null,r.a.createElement($.a,null,"Select Guests:"),m.map((function(e,t){return r.a.createElement(qt.a,{key:t,item:!0,xs:12},r.a.createElement(La.a,{id:"combo-box-demo",options:a,getOptionLabel:function(e){return function(e){return e.lastName?e.firstName+" "+e.lastName+" "+e.dateOfBirth+" "+e.email:e.firstName}(e)},size:"small",onChange:function(e,a){return s(t,a)},value:e,getOptionSelected:function(e,t){return e.firstName===t.firstName},rend:!0,renderInput:function(e){return r.a.createElement(_t.a,{component:"div",className:y.box},r.a.createElement(Ke.a,Object.assign({},e,{variant:"outlined"})),r.a.createElement(ce.a,{color:"primary","aria-label":"remove guest",onClick:u(t)},r.a.createElement(va.a,null)))}}))}))),r.a.createElement(Ga.a,null,r.a.createElement(q.a,{color:"secondary",variant:"contained",type:"button",size:"small",onClick:i},"Add Guest")))),r.a.createElement(qt.a,{item:!0,xs:6},r.a.createElement(Aa.a,null,h&&r.a.createElement(Ua.a,null,r.a.createElement($.a,null,"Room Details"),r.a.createElement(La.a,{id:"combo-box-demo",options:C,getOptionLabel:function(e){return e.roomName+" Capacity:"+e.roomCapacity},size:"small",onChange:function(e,t){return E(t)},value:h,getOptionSelected:function(e,t){return e.roomName===t.roomName},renderInput:function(e){return r.a.createElement(Ke.a,Object.assign({},e,{variant:"outlined"}))}}),r.a.createElement(ra,{amenities:h.amenities}),r.a.createElement(ue.a,null,h.beds.map((function(e,t){return r.a.createElement(de.a,{key:t},r.a.createElement(be.a,null,"Single"===e?r.a.createElement(ia.a,null):r.a.createElement(ca.a,null)),r.a.createElement(fe.a,{primary:e}))}))))),j?r.a.createElement(Aa.a,{className:y.card},r.a.createElement(Ua.a,null,r.a.createElement($.a,null,"Status"),r.a.createElement(xt.a,{variant:"outlined",className:y.formControl,size:"small",fullWidth:!0},r.a.createElement(Ea.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Status",value:k,onChange:function(e){return S(e.target.value)}},r.a.createElement(Ma.a,{value:"Started"},"Started"),r.a.createElement(Ma.a,{value:"Booked"},"Booked"),r.a.createElement(Ma.a,{value:"Checked In"},"Checked In"),r.a.createElement(Ma.a,{value:"Complete"},"Complete"))))):null),j?null:r.a.createElement(qt.a,{item:!0,xs:12},r.a.createElement(q.a,{color:"secondary",variant:"contained",type:"button",onClick:function(){return n()},size:"small"},"Cancel"),r.a.createElement(q.a,{color:"secondary",variant:"contained",type:"button",size:"small",onClick:function(e){return c(e)}},"Submit"),l&&r.a.createElement("p",null,l.message))))},_a=Object(ae.a)((function(e){return{root:{backgroundColor:e.palette.background.grid},paper:{padding:e.spacing(2)},grid:{padding:e.spacing(2)},box:{width:"40wv",display:"flex"},card:{marginTop:e.spacing(2)}}}));var Ka=function(e){var t=e.booking,a=e.guests,n=e.onToggleEditMode,l=e.error,c=e.handleSubmit,o=e.addGuest,i=e.handleGuest,s=e.handleDeleteGuest,u=e.selectedGuests,m=e.checkInDate,d=e.checkOutDate,b=e.room,f=e.numberOfGuests,p=_a();return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(qt.a,{container:!0,spacing:3,component:_e.a,className:p.root},r.a.createElement(qt.a,{item:!0,xs:12},r.a.createElement($.a,{variant:"h4"},"Confirm details")),r.a.createElement(qt.a,{item:!0,xs:6},r.a.createElement(Aa.a,null,r.a.createElement(Ua.a,null,r.a.createElement($.a,null,"Check In Date: ",m),r.a.createElement($.a,null,"Check Out Date: ",d),r.a.createElement($.a,null," Number of Guests: ",f))),r.a.createElement(Aa.a,{className:p.card},r.a.createElement(Ua.a,null,r.a.createElement($.a,null,"Select Guests:"),u.map((function(e,t){return r.a.createElement(qt.a,{key:t,item:!0,xs:12},r.a.createElement(La.a,{id:"combo-box-demo",options:a,getOptionLabel:function(e){return function(e){return e.lastName?e.firstName+" "+e.lastName+" "+e.dateOfBirth+" "+e.email:e.firstName}(e)},size:"small",onChange:function(e,a){return i(t,a)},value:e,getOptionSelected:function(e,t){return e.firstName===t.firstName},renderInput:function(e){return r.a.createElement(_t.a,{component:"div",className:p.box},r.a.createElement(Ke.a,Object.assign({},e,{variant:"outlined"})),r.a.createElement(ce.a,{color:"primary","aria-label":"remove guest",onClick:s(t)},r.a.createElement(va.a,null)))}}))}))),r.a.createElement(Ga.a,null,r.a.createElement(q.a,{color:"secondary",variant:"contained",type:"button",size:"small",onClick:o},"Add Guest")))),r.a.createElement(qt.a,{item:!0,xs:6},r.a.createElement(Aa.a,null,b&&r.a.createElement(Ua.a,null,r.a.createElement($.a,null,"Room Name: ",b.roomName),r.a.createElement(ra,{amenities:b.amenities})))),r.a.createElement(qt.a,{item:!0,xs:12},r.a.createElement(q.a,{color:"secondary",variant:"contained",type:"button",onClick:function(){return n()},size:"small"},"edit"),r.a.createElement(q.a,{color:"secondary",variant:"contained",type:"button",size:"small",onClick:function(e){return c(e)}},"Submit"),l&&r.a.createElement("p",null,l.message))))},Ha=Object(ae.a)((function(e){return{paper:{padding:e.spacing(2)}}}));var Qa=Object(M.a)(z,kt((function(e){return e&&!!e.roles.ADMIN||e&&!!e.roles.STAFF})))((function(e){var t=Ha(),a=Object(n.useState)(!1),l=Object(V.a)(a,2),c=l[0],i=l[1],s=Object(n.useState)(!1),u=Object(V.a)(s,2),m=u[0],d=u[1],f=Object(n.useState)(""),p=Object(V.a)(f,2),g=p[0],E=p[1],h=Object(n.useState)([]),v=Object(V.a)(h,2),O=v[0],j=v[1],k=Object(n.useState)(""),S=Object(V.a)(k,2),y=S[0],C=S[1],N=Object(n.useState)(""),x=Object(V.a)(N,2),w=x[0],D=x[1],I=Object(n.useState)(""),F=Object(V.a)(I,2),R=F[0],P=F[1],T=Object(n.useState)(""),B=Object(V.a)(T,2),A=B[0],U=B[1],M=Object(G.f)().id,L=Object(n.useState)(""),z=Object(V.a)(L,2),W=z[0],_=z[1],K=Object(o.d)((function(e){return{booking:Object.keys(e.bookingState.bookings||{}).map((function(t){return Object(b.a)(Object(b.a)({},e.bookingState.bookings[t]),{},{uid:t})})).find((function(e){return e.uid===M})),guests:Object.keys(e.guestState.guests||{}).map((function(t){return Object(b.a)(Object(b.a)({},e.guestState.guests[t]),{},{uid:t})}))}})),H=K.booking,Q=K.guests,q=Object(o.d)((function(e){return{bookedRoom:Object.keys(e.roomState.rooms||{}).map((function(t){return Object(b.a)(Object(b.a)({},e.roomState.rooms[t]),{},{uid:t})})).find((function(e){return e.uid===H.roomId}))}})).bookedRoom;function J(){d(!m)}function $(e,t){var a=Object(fa.a)(O);a[e]=t,j(a)}Object(n.useEffect)((function(){H||i(!0),H&&(y&&A||(C(H.checkInDate),D(H.checkOutDate),U(q),P(H.numberOfGuests),i(!1),_("Booked"),function(){var e=Object(fa.a)(O);if(O.length<H.numberOfGuests)for(var t=0;t<H.numberOfGuests;t++){var a={firstName:"guest ".concat(t+1)};e.push(a)}j(e)}()))}),[H]),Object(n.useEffect)((function(){P(O.length)}),[O]);var Z=function(e){return function(t){t.preventDefault();var a=[].concat(Object(fa.a)(O.slice(0,e)),Object(fa.a)(O.slice(e+1)));j(a)}},X=function(e){e.preventDefault();var t={firstName:"guest ".concat(O.length+1)},a=O.concat([t]);j(a)};function ee(t){t.preventDefault();var a=A.uid,n={guests:O,checkInDate:y,checkOutDate:w,roomId:a,status:W,numberOfGuests:R};e.firebase.fetchId("bookings",H.uid).set(Object(b.a)({},n)).then((function(){alert("Booking made for the ".concat(y," to the ").concat(w," in the ").concat(A.roomName," room for ").concat(O.length," guests.\n          Booking confirmation number ").concat(H.uid)),e.history.push(Y)})).catch((function(e){E(e)}))}return r.a.createElement(We.a,{maxWidth:"xl"},c&&r.a.createElement(_e.a,{className:t.paper},r.a.createElement("p",null,"Loading...")),m?r.a.createElement(Wa,{booking:H,guests:Q,onToggleEditMode:J,error:g,checkInDate:y,checkOutDate:w,setCheckInDate:C,setCheckOutDate:D,handleSubmit:ee,addGuest:X,handleGuest:$,handleDeleteGuest:Z,selectedGuests:O,setRoom:U,room:A,numberOfGuests:R,setNumberOfGuests:P,status:W}):r.a.createElement(Ka,{booking:H,guests:Q,onToggleEditMode:J,error:g,handleSubmit:ee,addGuest:X,handleGuest:$,handleDeleteGuest:Z,selectedGuests:O,checkInDate:y,checkOutDate:w,room:A,numberOfGuests:R}))})),Va=ba;function qa(){return r.a.createElement("h1",null,"Activities")}var Ja=Object(ae.a)((function(e){return{root:{display:"flex",flexDirection:"column"},textField:{marginBottom:e.spacing(2)},paper:{padding:e.spacing(2)},row:{cursor:"pointer"},button:{marginRight:e.spacing(2)}}}));var $a=z((function(e){var t=Ja(),a=Object(n.useState)(!1),l=Object(V.a)(a,2),c=l[0],i=l[1],s=Object(n.useState)(""),u=Object(V.a)(s,2),m=u[0],d=u[1],b=e.user,f=Object(n.useState)(""),p=Object(V.a)(f,2),g=p[0],E=p[1],h=Object(n.useState)(""),v=Object(V.a)(h,2),O=v[0],j=v[1],k=Object(n.useState)(""),S=Object(V.a)(k,2),y=S[0],C=S[1],N=Object(o.d)((function(e){return{authUser:e.sessionState.authUser}})).authUser;Object(n.useEffect)((function(){E(b.username),j(b.email),C(Object.keys(b.roles))}),[]);var x=function(t){t.preventDefault();var a={};a[y]=y;var n={username:g,email:O,roles:a};e.firebase.fetchId("users",b.uid).set(n).then((function(){alert("You have Edited ".concat(g)),i(!1)})).catch((function(e){d(e)}))},w="sam@sam.com"!==N.email;return r.a.createElement(r.a.Fragment,null,r.a.createElement(zt.a,{hover:!0,className:t.row},r.a.createElement(Gt.a,null,g),r.a.createElement(Gt.a,null,O),r.a.createElement(Gt.a,null,y),r.a.createElement(Gt.a,null,r.a.createElement(q.a,{color:"secondary",variant:"contained",type:"button",onClick:function(){return i(!0)},className:t.button,size:"small"},"Edit"),r.a.createElement(q.a,{onClick:function(){return t=b.uid,void e.firebase.fetchId("users",t).remove();var t},color:"secondary",variant:"contained",type:"button",size:"small",disabled:w,className:t.button},"Delete"))),r.a.createElement(ya.a,{open:c,onClose:function(){return i(!1)},"aria-labelledby":"form-dialog"},r.a.createElement(Ca.a,{id:"alert-dialog-title"},"User Id:",b.uid),r.a.createElement(Na.a,null,r.a.createElement("form",{onSubmit:x,className:t.root},r.a.createElement(Ke.a,{name:"username",id:"standard-basic",label:"Username",type:"text",className:t.textField,value:g,onChange:function(e){return E(e.target.value)}}),r.a.createElement(ga.a,{shrink:!0,id:"demo-simple-select-placeholder-label-label"},"Status"),r.a.createElement(Ea.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Status",value:y,onChange:function(e){C(e.target.value)}},r.a.createElement(Ma.a,{value:"ADMIN"},"ADMIN"),r.a.createElement(Ma.a,{value:"STAFF"},"STAFF"),r.a.createElement(Ma.a,{value:"GUEST"},"GUEST")))),r.a.createElement(wa.a,null,m&&r.a.createElement("p",null,m.message),r.a.createElement(q.a,{onClick:x,color:"secondary",variant:"contained",type:"submit"},"Save"),r.a.createElement(q.a,{onClick:function(){return i(!1)},color:"secondary",variant:"contained",type:"button"},"Cancel"))))})),Ya=Object(ae.a)((function(e){return{table:{minWidth:650},container:{marginTop:e.spacing(2),padding:e.spacing(2)}}}));var Za=Object(M.a)(z,kt((function(e){return e&&!!e.roles.ADMIN})))((function(e){var t=Ya(),a=Object(o.c)(),l=Object(n.useState)(!1),c=Object(V.a)(l,2),i=c[0],s=c[1],u=Object(o.d)((function(e){return{users:Object.keys(e.userState.users||{}).map((function(t){return Object(b.a)(Object(b.a)({},e.userState.users[t]),{},{uid:t})}))}})).users;return Object(n.useEffect)((function(){return u.length||s(!0),e.firebase.fetch("users").on("value",(function(e){!function(e){a({type:"USERS_SET",users:e})}(e.val())})),s(!1),function(){e.firebase.fetch("users").off()}}),[u]),r.a.createElement(We.a,{maxWidth:"xl"},r.a.createElement(_e.a,{className:t.container},r.a.createElement("h2",null,"Staff"),r.a.createElement(Mt.a,null,r.a.createElement(At.a,{className:t.table,"aria-label":"simple table"},r.a.createElement(Lt.a,null,r.a.createElement(zt.a,null,r.a.createElement(Gt.a,null,"Username"),r.a.createElement(Gt.a,null,"Email Address"),r.a.createElement(Gt.a,null,"Role"),r.a.createElement(Gt.a,null))),r.a.createElement(Ut.a,null,i&&r.a.createElement(Ra,null),u&&u.map((function(e){return r.a.createElement($a,{key:e.uid,user:e})})))))))})),Xa=Object(ae.a)((function(e){return{root:{padding:e.spacing(1),display:"flex",flexDirection:"column",width:"20vw"},textField:{marginBottom:e.spacing(1)},button:{width:e.spacing(35)}}}));var en=z((function(e){var t=Xa(),a=Object(n.useState)(""),l=Object(V.a)(a,2),c=l[0],o=l[1],i=Nt(""),s=i.value,u=i.bind,m=i.reset,d=Nt(""),b=d.value,f=d.bind,p=d.reset,g=s!==b||""===s;return r.a.createElement("form",{onSubmit:function(t){e.firebase.doPasswordUpdate(s).then((function(){m(),p()})).catch((function(e){o(e)})),t.preventDefault()},className:t.root},r.a.createElement($.a,{variant:"h5",gutterBottom:!0},"Change Password"),r.a.createElement(Ke.a,Object.assign({id:"filled-margin-none",className:t.textField,name:"passwordOne",type:"password",variant:"filled",size:"small",placeholder:"New password"},u)),r.a.createElement(Ke.a,Object.assign({id:"filled-margin-none",className:t.textField,name:"passwordTwo",type:"password",variant:"filled",size:"small",placeholder:"Confirm New Password"},f)),r.a.createElement(q.a,{className:t.button,disabled:g,color:"secondary",variant:"contained",type:"submit"},"Reset My Password"),c&&r.a.createElement("p",null,c.message))})),tn=Object(ae.a)((function(e){return{root:{padding:e.spacing(2)}}}));var an=Object(M.a)(Object(o.b)((function(e){return{authUser:e.sessionState.authUser}})),kt((function(e){return!!e})))((function(e){var t=e.authUser,a=tn();return r.a.createElement(We.a,{maxWidth:"xl"},r.a.createElement(_e.a,{className:a.root},r.a.createElement($.a,{variant:"h4",gutterBottom:!0},"Account: ",t.email),r.a.createElement(en,null)))})),nn=function(e){Object($e.a)(a,e);var t=Object(Ye.a)(a);function a(e){var n;return Object(_.a)(this,a),(n=t.call(this,e)).state={loading:!1},n}return Object(Je.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.users.length||this.setState({loading:!0}),this.props.firebase.users().on("value",(function(t){e.props.onSetUsers(t.val())})),this.setState({loading:!1})}},{key:"componentWillUnmount",value:function(){this.props.firebase.users().off()}},{key:"render",value:function(){var e=this.props.users,t=this.state.loading;return r.a.createElement("div",null,r.a.createElement("h2",null,"Users"),t&&r.a.createElement("div",null,"Loading ..."),r.a.createElement("ul",null,e.map((function(e){return r.a.createElement("li",{key:e.uid},r.a.createElement("span",null,r.a.createElement("strong",null,"ID:")," ",e.uid),r.a.createElement("span",null,r.a.createElement("strong",null,"E-Mail:")," ",e.email),r.a.createElement("span",null,r.a.createElement("strong",null,"Username:")," ",e.username),r.a.createElement("span",null,r.a.createElement(U.b,{to:"".concat("/admin","/").concat(e.uid)},"Details")))}))))}}]),a}(n.Component),rn=Object(M.a)(z,Object(o.b)((function(e){return{users:Object.keys(e.userState.users||{}).map((function(t){return Object(b.a)(Object(b.a)({},e.userState.users[t]),{},{uid:t})}))}}),(function(e){return{onSetUsers:function(t){return e({type:"USERS_SET",users:t})}}})))(nn),ln=function(e){Object($e.a)(a,e);var t=Object(Ye.a)(a);function a(e){var n;return Object(_.a)(this,a),(n=t.call(this,e)).onSendPasswordResetEmail=function(){n.props.firebase.doPasswordReset(n.props.user.email)},n.state={loading:!1},n}return Object(Je.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.user||this.setState({loading:!0}),this.props.firebase.user(this.props.match.params.id).on("value",(function(t){e.props.onSetUsers(t.val(),e.props.match.params.id),e.setState({loading:!1})}))}},{key:"componentWillUnmount",value:function(){this.props.firebase.user(this.props.match.params.id).off()}},{key:"render",value:function(){var e=this.props.user,t=this.state.loading;return r.a.createElement("div",null,r.a.createElement("h2",null,"User (",this.props.match.params.id,")"),t&&r.a.createElement("div",null,"Loading ..."),e&&r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement("strong",null,"ID:")," ",e.uid),r.a.createElement("span",null,r.a.createElement("strong",null,"E-Mail:")," ",e.email),r.a.createElement("span",null,r.a.createElement("strong",null,"Username:")," ",e.username),r.a.createElement("span",null,r.a.createElement("button",{type:"button",onClick:this.onSendPasswordResetEmail}))))}}]),a}(n.Component),cn=Object(M.a)(z,Object(o.b)((function(e,t){return{users:(e.userState.users||{})[t.match.params.id]}}),(function(e){return{onSetUsers:function(t,a){return e({type:"USER_SET",users:t,uid:a})}}})))(ln),on=Object(M.a)(kt((function(e){return e&&!!e.roles.ADMIN})))((function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Admin"),r.a.createElement("p",null,"The Admin Page is accessible by every signed in admin user."),r.a.createElement(G.c,null,r.a.createElement(G.a,{exact:!0,path:"/admin/:id",component:cn}),r.a.createElement(G.a,{exact:!0,path:"/admin",component:rn})))})),sn=a(70),un=a.n(sn),mn=a(93);var dn=function(e){var t=e.classes,a=e.guests,l=e.setFilteredGuests,c=Object(n.useState)(""),o=Object(V.a)(c,2),i=o[0],s=o[1],u=Object(n.useState)(""),m=Object(V.a)(u,2),d=m[0],b=m[1],f=Object(n.useState)(""),p=Object(V.a)(f,2),g=p[0],E=p[1],h=Object(n.useState)(""),v=Object(V.a)(h,2),O=v[0],j=v[1],k=Object(n.useState)(""),S=Object(V.a)(k,2),y=S[0],C=S[1],N=Object(n.useState)(""),x=Object(V.a)(N,2),w=x[0],D=x[1],I=Object(n.useState)(""),F=Object(V.a)(I,2),R=F[0],P=F[1];return r.a.createElement(_e.a,{className:t.container},r.a.createElement($.a,{variant:"h5",gutterBottom:!0,className:t.title},"Search Guests"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=[i,d,g,O,y,w,R],n=a.filter((function(e){return!(t[0]&&!e.firstName.toLowerCase().includes(t[0].toLowerCase()))&&(!(t[1]&&!e.lastName.toLowerCase().includes(t[0].toLowerCase()))&&(!(t[2]&&!e.dateOfBirth.includes(t[2]))&&(!(t[3]&&!e.contactNumber.includes(t[3]))&&(!(t[4]&&!e.email.toLowerCase().includes(t[4].toLowerCase()))&&(!(t[5]&&!e.address.toLowerCase().includes(t[5].toLowerCase()))&&!(t[6]&&!e.postcode.toLowerCase().includes(t[6].toLowerCase())))))))}));l(n)}},r.a.createElement("div",{className:t.divider},r.a.createElement(Ke.a,{name:"firstName",id:"filled-basic",label:"First Name",className:t.textField,variant:"filled",type:"text",onChange:function(e){return s(e.target.value)}}),r.a.createElement(Ke.a,{name:"lastName",id:"filled-basic",label:"Last Name",className:t.textField,variant:"filled",type:"text",onChange:function(e){return b(e.target.value)}}),r.a.createElement(Ke.a,{name:"dateOfBirth",id:"date",label:"Date Of Birth",className:t.textField,variant:"filled",type:"date",InputLabelProps:{shrink:!0},onChange:function(e){return E(e.target.value)}}),r.a.createElement(Ke.a,{name:"contactNumber",id:"filled-basic",label:"Contact Number",type:"number",className:t.textField,variant:"filled",onChange:function(e){return j(e.target.value)}})),r.a.createElement("div",{className:t.divider},r.a.createElement(Ke.a,{name:"email",id:"filled-basic",label:"Email",className:t.textField,variant:"filled",type:"text",onChange:function(e){return C(e.target.value)}}),r.a.createElement(Ke.a,{name:"address",id:"filled-margin-none",label:"Address",className:t.textField,type:"text",variant:"filled",onChange:function(e){return D(e.target.value)}}),r.a.createElement(Ke.a,{name:"postcode",id:"filled-basic",label:"Postcode",className:t.textField,variant:"filled",type:"text",onChange:function(e){return P(e.target.value)}})),r.a.createElement("div",{className:t.divider},r.a.createElement(q.a,{className:t.button,color:"secondary",variant:"contained",type:"submit"},"Submit"))))},bn=Object(ae.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(2),width:300}," & .MuiFormControl-root":{margin:e.spacing(2)}},paper:{padding:e.spacing(2)},row:{cursor:"pointer"}}}));var fn=z((function(e){var t=bn(),a=r.a.useState(!1),l=Object(V.a)(a,2),c=l[0],o=l[1],i=Object(n.useState)(""),s=Object(V.a)(i,2),u=s[0],m=s[1],d=e.guest,f=e.selected,p=e.setSelected,g=e.index,E=Object(n.useState)(""),h=Object(V.a)(E,2),v=h[0],O=h[1],j=Object(n.useState)(""),k=Object(V.a)(j,2),S=k[0],y=k[1],C=Object(n.useState)(""),N=Object(V.a)(C,2),x=N[0],w=N[1],D=Object(n.useState)(""),I=Object(V.a)(D,2),F=I[0],R=I[1],P=Object(n.useState)(""),T=Object(V.a)(P,2),B=T[0],A=T[1],U=Object(n.useState)(""),G=Object(V.a)(U,2),M=G[0],L=G[1],z=Object(n.useState)(""),W=Object(V.a)(z,2),_=W[0],K=W[1],H=Object(n.useState)(""),Q=Object(V.a)(H,2),J=Q[0],$=Q[1];Object(n.useEffect)((function(){O("".concat(d.firstName)),y("".concat(d.lastName)),w("".concat(d.gender)),R("".concat(d.dateOfBirth)),A("".concat(d.contactNumber)),L("".concat(d.email)),K("".concat(d.address)),$("".concat(d.postcode))}),[]);var Y=function(t){t.preventDefault();var a={firstName:v,lastName:S,gender:x,dateOfBirth:F,contactNumber:B,email:M,address:_,postcode:J};e.firebase.fetchId("guests",d.uid).set(Object(b.a)({},a)).then((function(){alert("You have Edited \n    ".concat(v," \n    ").concat(S," \n    ").concat(x," \n    ").concat(F," \n    ").concat(B," \n    ").concat(M," \n    ").concat(_," \n    ").concat(J," \n    ")),o(!1)})).catch((function(e){m(e)}))},Z=function(e){return-1!==f.indexOf(e)},X="enhanced-table-checkbox-".concat(g);return r.a.createElement(r.a.Fragment,null,r.a.createElement(zt.a,{hover:!0,onClick:function(e){return function(e,t){var a=f.indexOf(t),n=[];-1===a?n=n.concat(f,t):0===a?n=n.concat(f.slice(1)):a===f.length-1?n=n.concat(f.slice(0,-1)):a>0&&(n=n.concat(f.slice(0,a),f.slice(a+1))),p(n)}(0,d.uid)},className:t.row,role:"checkbox","aria-checked":Z(d.uid),tabIndex:-1,key:d.fistName,selected:Z(d.uid)},r.a.createElement(Gt.a,{padding:"checkbox"},r.a.createElement(ja.a,{checked:Z(d.uid),inputProps:{"aria-labelledby":X}})),r.a.createElement(Gt.a,{component:"th",id:X,scope:"row",padding:"none"},v+" "+S),r.a.createElement(Gt.a,null,F),r.a.createElement(Gt.a,null,B),r.a.createElement(Gt.a,null,M),r.a.createElement(Gt.a,null,r.a.createElement(q.a,{color:"secondary",variant:"contained",type:"button",onClick:function(){return o(!0)},size:"small"},"Edit"))),r.a.createElement(ya.a,{open:c,onClose:function(){return o(!1)},"aria-labelledby":"form-dialog-title"},r.a.createElement(Ca.a,{id:"form-dialog-title"},v+" "+S),r.a.createElement(Na.a,null,r.a.createElement("form",{onSubmit:Y,className:t.root},r.a.createElement(Ke.a,{name:"firstName",id:"standard-basic",label:"First Name",type:"text",value:v,onChange:function(e){return O(e.target.value)}}),r.a.createElement(Ke.a,{name:"lastName",id:"standard-basic",label:"Last Name",type:"text",value:S,onChange:function(e){return y(e.target.value)}}),r.a.createElement(Ke.a,{name:"dateOfBirth",id:"date",label:"Date Of Birth",type:"date",InputLabelProps:{shrink:!0},value:F,onChange:function(e){return R(e.target.value)}}),r.a.createElement(xt.a,{component:"fieldset"},r.a.createElement(wt.a,{component:"legend"},"Gender"),r.a.createElement(Dt.a,{row:!0,"aria-label":"gender",name:"gender",value:x,onChange:function(e){return w(e.target.value)}},r.a.createElement(It.a,{value:"Female",control:r.a.createElement(Ft.a,null),label:"Female"}),r.a.createElement(It.a,{value:"Male",control:r.a.createElement(Ft.a,null),label:"Male"}),r.a.createElement(It.a,{value:"Other",control:r.a.createElement(Ft.a,null),label:"Other"}))),r.a.createElement(Ke.a,{name:"contactNumber",id:"standard-basic",label:"Contact Number",type:"tel",value:B,onChange:function(e){return A(e.target.value)}}),r.a.createElement(Ke.a,{name:"email",id:"standard-basic",label:"Email",type:"email",value:M,onChange:function(e){return L(e.target.value)}}),r.a.createElement(Ke.a,{name:"address",id:"standard-basic",label:"Address",multiline:!0,rows:4,type:"text",value:_,onChange:function(e){return K(e.target.value)}}),r.a.createElement(Ke.a,{name:"postcode",id:"standard-basic",label:"Postcode",type:"text",value:J,onChange:function(e){return $(e.target.value)}}))),r.a.createElement(wa.a,null,u&&r.a.createElement("p",null,u.message),r.a.createElement(q.a,{onClick:Y,color:"secondary",variant:"contained",type:"submit"},"Save"),r.a.createElement(q.a,{onClick:function(){return t=d.uid,void e.firebase.fetchId("guests",t).remove();var t},color:"secondary",variant:"contained",type:"submit"},"Delete"),r.a.createElement(q.a,{onClick:function(){return o(!1)},color:"secondary",variant:"contained",type:"submit"},"Cancel"))))})),pn=a(284),gn=[{id:"firstName",disablePadding:!0,label:"Full Name"},{id:"dateOfBirth",disablePadding:!1,label:"Date Of Birth"},{id:"contactNumber",disablePadding:!1,label:"Contact Number"},{id:"email",disablePadding:!1,label:"Email"}];var En=function(e){var t=e.classes,a=e.onSelectAllClick,n=e.order,l=e.orderBy,c=e.numSelected,o=e.rowCount,i=e.onRequestSort;return r.a.createElement(Lt.a,null,r.a.createElement(zt.a,null,r.a.createElement(Gt.a,{padding:"checkbox"},r.a.createElement(ja.a,{indeterminate:c>0&&c<o,checked:o>0&&c===o,onChange:a,inputProps:{"aria-label":"select all guests"}})),gn.map((function(e){return r.a.createElement(Gt.a,{key:e.id,padding:e.disablePadding?"none":"default",sortDirection:l===e.id&&n},r.a.createElement(pn.a,{active:l===e.id,direction:l===e.id?n:"asc",onClick:(a=e.id,function(e){i(e,a)})},e.label,l===e.id?r.a.createElement("span",{className:t.visuallyHidden},"desc"===n?"sorted descending":"sorted ascending"):null));var a})),r.a.createElement(Gt.a,null)))},hn=Object(ae.a)((function(e){return{table:{minWidth:650},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));var vn=function(e){var t=e.guests,a=e.loading,l=e.selected,c=e.setSelected,o=e.page,i=e.rowsPerPage,s=hn(),u=Object(n.useState)("firstName"),m=Object(V.a)(u,2),d=m[0],b=m[1],f=Object(n.useState)("asc"),p=Object(V.a)(f,2),g=p[0],E=p[1];function h(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}return r.a.createElement(Mt.a,null,r.a.createElement(At.a,{className:s.table,"aria-label":"simple table"},r.a.createElement(En,{classes:s,numSelected:l.length,order:g,orderBy:d,onSelectAllClick:function(e){if(e.target.checked){var a=t.map((function(e){return e.uid}));c(a)}else c([])},onRequestSort:function(e,t){E(d===t&&"asc"===g?"desc":"asc"),b(t)},rowCount:t.length}),r.a.createElement(Ut.a,null,a&&r.a.createElement(Ra,null),t&&function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(t,function(e,t){return"desc"===e?function(e,a){return h(e,a,t)}:function(e,a){return-h(e,a,t)}}(g,d)).slice(o*i,o*i+i).map((function(e,t){return r.a.createElement(fn,{key:e.uid,guest:e,index:t,selected:l,setSelected:c})})))))},On=a(3),jn=a(10),kn=a(94),Sn=a.n(kn),yn=a(95),Cn=a.n(yn),Nn=Object(ae.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.contrastText,backgroundColor:Object(jn.e)(e.palette.primary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}})),xn=function(e){var t=Nn(),a=e.numSelected,n=e.deleteAllSelected;return r.a.createElement(re.a,{className:Object(On.a)(t.root,Object(E.a)({},t.highlight,a>0))},a>0?r.a.createElement($.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div"},a," selected"):r.a.createElement($.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div"},"Guests"),a>0?r.a.createElement(na.a,{title:"Delete"},r.a.createElement(ce.a,{"aria-label":"delete",onClick:n},r.a.createElement(Sn.a,null))):r.a.createElement(na.a,{title:"Filter list"},r.a.createElement(ce.a,{"aria-label":"filter list"},r.a.createElement(Cn.a,null))))},wn=a(281),Dn=Object(ae.a)((function(e){return{container:{marginTop:e.spacing(2),padding:e.spacing(2)},textField:{marginRight:e.spacing(1),width:"15wv"},divider:{marginBottom:e.spacing(1)}}}));var In=Object(M.a)(kt((function(e){return e&&!!e.roles.ADMIN||e&&!!e.roles.STAFF})))((function(e){var t=Object(n.useState)(!1),a=Object(V.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)([]),s=Object(V.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)(0),f=Object(V.a)(d,2),p=f[0],g=f[1],E=Object(n.useState)(10),h=Object(V.a)(E,2),v=h[0],O=h[1],j=Object(n.useState)(!1),k=Object(V.a)(j,2),S=k[0],y=k[1],C=Object(n.useState)(""),N=Object(V.a)(C,2),x=N[0],w=N[1],D=Object(o.d)((function(e){return{guests:Object.keys(e.guestState.guests||{}).map((function(t){return Object(b.a)(Object(b.a)({},e.guestState.guests[t]),{},{uid:t})}))}})).guests,I=Dn();function F(){return(F=Object(mn.a)(un.a.mark((function t(){var a;return un.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=0;case 1:if(!(a<u.length)){t.next=8;break}return t.next=4,new Promise((function(e){return setTimeout(e,1e3*Math.random())}));case 4:e.firebase.fetchId("guests",u[a]).remove();case 5:a++,t.next=1;break;case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(n.useEffect)((function(){D.length||c(!0),x.length||w(D),c(!1)}),[x]),r.a.createElement(We.a,{maxWidth:"xl"},r.a.createElement(dn,{classes:I,guests:D,setFilteredGuests:w}),r.a.createElement(_e.a,{className:I.container},r.a.createElement(xn,{numSelected:u.length,deleteAllSelected:function(){return y(!0)}}),r.a.createElement(vn,{guests:x,loading:l,selected:u,setSelected:m,page:p,rowsPerPage:v}),r.a.createElement(wn.a,{rowsPerPageOptions:[10,25,50,100],component:"div",count:D.length,rowsPerPage:v,page:p,onChangePage:function(e,t){g(t)},onChangeRowsPerPage:function(e){O(parseInt(e.target.value,10)),g(0)}}),r.a.createElement(ya.a,{open:S,onClose:function(){y(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Ca.a,{id:"alert-dialog-title"},"Confirmation"),r.a.createElement(Na.a,null,r.a.createElement(xa.a,{id:"alert-dialog-description"},"Are you sure you want to Delete the selected ",u.length," ","guests?")),r.a.createElement(wa.a,null,r.a.createElement(q.a,{onClick:function(){y(!1)},color:"primary"},"Cancel"),r.a.createElement(q.a,{onClick:function(){u.length>1?(!function(){F.apply(this,arguments)}(),y(!1),m([])):e.firebase.fetchId("guests",u).remove()},color:"primary",autoFocus:!0},"Confirm")))))})),Fn=Object(ae.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(2),width:300}," & .MuiFormControl-root":{margin:e.spacing(2)}},paper:{padding:e.spacing(2)},row:{cursor:"pointer"},button:{marginRight:e.spacing(2),marginBottom:e.spacing(1)},buttonCell:{display:"flex","justify-content":"space-evenly",flexWrap:"wrap"}}}));var Rn=z((function(e){var t=Fn(),a=Object(n.useState)(!1),l=Object(V.a)(a,2),c=l[0],i=l[1],s=Object(n.useState)(!1),u=Object(V.a)(s,2),m=u[0],d=u[1],f=e.reservation,p=e.error,g=e.setError,E=e.selected,h=e.setSelected,v=e.index,O=Object(n.useState)(""),j=Object(V.a)(O,2),k=j[0],S=j[1],y=Object(n.useState)(""),C=Object(V.a)(y,2),N=C[0],x=C[1],w=Object(n.useState)(""),D=Object(V.a)(w,2),I=D[0],F=D[1],R=Object(n.useState)(""),P=Object(V.a)(R,2),T=P[0],B=P[1],A=Object(n.useState)(""),U=Object(V.a)(A,2),G=U[0],M=U[1],L=Object(n.useState)([{firstName:"guest 1"}]),z=Object(V.a)(L,2),W=z[0],_=z[1],K=Object(n.useState)(!0),H=Object(V.a)(K,1)[0],Q=Object(o.d)((function(e){return{guests:Object.keys(e.guestState.guests||{}).map((function(t){return Object(b.a)(Object(b.a)({},e.guestState.guests[t]),{},{uid:t})}))}})).guests,J=Object(o.d)((function(e){return{bookedRoom:Object.keys(e.roomState.rooms||{}).map((function(t){return Object(b.a)(Object(b.a)({},e.roomState.rooms[t]),{},{uid:t})})).find((function(e){return e.uid===f.roomId}))}})).bookedRoom;Object(n.useEffect)((function(){T||k||(S(f.checkInDate),x(f.checkOutDate),B(J),F(f.numberOfGuests),M(f.status),f.guests&&_(f.guests))}),[T]);var $=function(t){t.preventDefault();var a={guests:W,checkInDate:k,checkOutDate:N,room:T,status:G,numberOfGuests:I};e.firebase.fetchId("bookings",f.uid).set(Object(b.a)({},a)).then((function(){alert("Booking edited for the ".concat(k," to the ").concat(N," in the ").concat(T.roomName," room for ").concat(W.length," guests.\n          Booking confirmation number ").concat(f.uid)),X()})).catch((function(e){g(e)}))},Y=function(){d(!0)},Z=function(){d(!1)},X=function(){i(!1)},ee=function(){M("Checked In");e.firebase.fetchId("bookings",f.uid).update({status:"Checked In"}).catch((function(e){g({error:e})}))},te=function(){M("Completed");e.firebase.fetchId("bookings",f.uid).update({status:"Completed"}).catch((function(e){g({error:e})}))},ae=function(e){return-1!==E.indexOf(e)},ne="enhanced-table-checkbox-".concat(v);return r.a.createElement(r.a.Fragment,null,r.a.createElement(zt.a,{hover:!0,onClick:function(e){return function(e,t){var a=E.indexOf(t),n=[];-1===a?n=n.concat(E,t):0===a?n=n.concat(E.slice(1)):a===E.length-1?n=n.concat(E.slice(0,-1)):a>0&&(n=n.concat(E.slice(0,a),E.slice(a+1))),h(n)}(0,f.uid)},className:t.row,role:"checkbox","aria-checked":ae(f.uid),tabIndex:-1,key:f.fistName,selected:ae(f.uid)},r.a.createElement(Gt.a,{padding:"checkbox"},r.a.createElement(ja.a,{checked:ae(f.uid),inputProps:{"aria-labelledby":ne}})),r.a.createElement(Gt.a,null,f.uid),r.a.createElement(Gt.a,null,k),r.a.createElement(Gt.a,null,N),r.a.createElement(Gt.a,null,I),r.a.createElement(Gt.a,null,T.roomName),r.a.createElement(Gt.a,null,G),r.a.createElement(Gt.a,{className:t.buttonCell},"Checked In"===G?r.a.createElement(q.a,{color:"secondary",variant:"contained",type:"button",onClick:te,size:"small",className:t.button},"Check Out"):"Completed"===G?null:r.a.createElement(q.a,{color:"secondary",variant:"contained",type:"button",onClick:ee,size:"small",className:t.button},"Check In"),r.a.createElement(q.a,{color:"secondary",variant:"contained",type:"button",onClick:function(){i(!0)},size:"small",className:t.button},"Edit"),r.a.createElement(q.a,{onClick:Y,color:"secondary",variant:"contained",type:"button",size:"small",className:t.button},"Delete"))),r.a.createElement(ya.a,{open:c,onClose:X,"aria-labelledby":"form-dialog-title",maxWidth:"xl"},r.a.createElement(Ca.a,{id:"form-dialog-title"},"Booking ",f.uid),r.a.createElement(Na.a,null,r.a.createElement(Wa,{booking:f,guests:Q,onToggleEditMode:X,error:p,checkInDate:k,checkOutDate:N,setCheckInDate:S,setCheckOutDate:x,handleSubmit:$,addGuest:function(e){e.preventDefault();var t=W.length+1,a={firstName:"guest ".concat(t)},n=W.concat([a]);_(n)},handleGuest:function(e,t){var a=Object(fa.a)(W);a[e]=t,_(a)},handleDeleteGuest:function(e){return function(t){t.preventDefault();var a=[].concat(Object(fa.a)(W.slice(0,e)),Object(fa.a)(W.slice(e+1)));console.log(a),_(a)}},selectedGuests:W,setRoom:B,room:T,numberOfGuests:I,setNumberOfGuests:F,reservationMode:H,status:G,setStatus:M})),r.a.createElement(wa.a,null,p&&r.a.createElement("p",null,p.message),r.a.createElement(q.a,{onClick:$,color:"secondary",variant:"contained",type:"submit"},"Save"),r.a.createElement(q.a,{onClick:Y,color:"secondary",variant:"contained",type:"button"},"Delete"),r.a.createElement(q.a,{onClick:X,color:"secondary",variant:"contained",type:"button"},"Cancel"))),r.a.createElement(ya.a,{open:m,onClose:Z,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Ca.a,{id:"alert-dialog-title"},"Confirmation"),r.a.createElement(Na.a,null,r.a.createElement(xa.a,{id:"alert-dialog-description"},"Are you sure you want to Delete booking:",f.uid,"?")),r.a.createElement(wa.a,null,r.a.createElement(q.a,{onClick:Z,color:"primary"},"Cancel"),r.a.createElement(q.a,{onClick:function(){e.firebase.fetchId("bookings",f.uid).remove()},color:"primary",autoFocus:!0},"Confirm"))))})),Pn=[{id:"bookingRef",disablePadding:!0,label:"Booking Ref"},{id:"checkInDate",disablePadding:!1,label:"Check In Date"},{id:"checkOutDate",disablePadding:!1,label:"Check Out Date"},{id:"numberOfGuests",disablePadding:!1,label:"Number of Guests"},{id:"roomName",disablePadding:!1,label:"Room Name"},{id:"bookingStatus",disablePadding:!1,label:"Booking Status"}];var Tn=function(e){var t=e.classes,a=e.onSelectAllClick,n=e.order,l=e.orderBy,c=e.numSelected,o=e.rowCount,i=e.onRequestSort;return r.a.createElement(Lt.a,null,r.a.createElement(zt.a,null,r.a.createElement(Gt.a,{padding:"checkbox"},r.a.createElement(ja.a,{indeterminate:c>0&&c<o,checked:o>0&&c===o,onChange:a,inputProps:{"aria-label":"select all guests"}})),Pn.map((function(e){return r.a.createElement(Gt.a,{key:e.id,padding:e.disablePadding?"none":"default",sortDirection:l===e.id&&n},r.a.createElement(pn.a,{active:l===e.id,direction:l===e.id?n:"asc",onClick:(a=e.id,function(e){i(e,a)})},e.label,l===e.id?r.a.createElement("span",{className:t.visuallyHidden},"desc"===n?"sorted descending":"sorted ascending"):null));var a})),r.a.createElement(Gt.a,null)))},Bn=Object(ae.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.contrastText,backgroundColor:Object(jn.e)(e.palette.primary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}})),An=function(e){var t=Bn(),a=e.numSelected,n=e.deleteAllSelected;return r.a.createElement(re.a,{className:Object(On.a)(t.root,Object(E.a)({},t.highlight,a>0))},a>0?r.a.createElement($.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div"},a," selected"):r.a.createElement($.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div"},"Reservations"),a>0?r.a.createElement(na.a,{title:"Delete"},r.a.createElement(ce.a,{"aria-label":"delete",onClick:n},r.a.createElement(Sn.a,null))):r.a.createElement(na.a,{title:"Filter list"},r.a.createElement(ce.a,{"aria-label":"filter list"},r.a.createElement(Cn.a,null))))};var Un=z((function(e){var t=e.classes,a=e.error,l=e.setError,c=e.loading,o=e.bookings,i=Object(n.useState)([]),s=Object(V.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)(0),b=Object(V.a)(d,2),f=b[0],p=b[1],g=Object(n.useState)(10),E=Object(V.a)(g,2),h=E[0],v=E[1],O=Object(n.useState)(!1),j=Object(V.a)(O,2),k=j[0],S=j[1],y=Object(n.useState)("checkInDate"),C=Object(V.a)(y,2),N=C[0],x=C[1],w=Object(n.useState)("asc"),D=Object(V.a)(w,2),I=D[0],F=D[1];function R(){return(R=Object(mn.a)(un.a.mark((function t(){var a;return un.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=0;case 1:if(!(a<u.length)){t.next=8;break}return t.next=4,new Promise((function(e){return setTimeout(e,1e3*Math.random())}));case 4:e.firebase.fetchId("bookings",u[a]).remove();case 5:a++,t.next=1;break;case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function P(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}return r.a.createElement(_e.a,{className:t.container},r.a.createElement(An,{numSelected:u.length,deleteAllSelected:function(){return S(!0)}}),a&&r.a.createElement("p",null,a.message),r.a.createElement(Mt.a,null,r.a.createElement(At.a,{className:t.table,"aria-label":"simple table"},r.a.createElement(Tn,{classes:t,numSelected:u.length,order:I,orderBy:N,onSelectAllClick:function(e){if(e.target.checked){var t=o.map((function(e){return e.uid}));m(t)}else m([])},onRequestSort:function(e,t){F(N===t&&"asc"===I?"desc":"asc"),x(t)},rowCount:o.length}),r.a.createElement(Ut.a,null,c&&r.a.createElement(Ra,null),o&&function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(o,function(e,t){return"desc"===e?function(e,a){return P(e,a,t)}:function(e,a){return-P(e,a,t)}}(I,N)).slice(f*h,f*h+h).map((function(e,t){return r.a.createElement(Rn,{key:e.uid,index:t,reservation:e,setError:l,selected:u,setSelected:m})}))))),r.a.createElement(wn.a,{rowsPerPageOptions:[10,25,50,100],component:"div",count:o.length,rowsPerPage:h,page:f,onChangePage:function(e,t){p(t)},onChangeRowsPerPage:function(e){v(parseInt(e.target.value,10)),p(0)}}),r.a.createElement(ya.a,{open:k,onClose:function(){S(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Ca.a,{id:"alert-dialog-title"},"Confirmation"),r.a.createElement(Na.a,null,r.a.createElement(xa.a,{id:"alert-dialog-description"},"Are you sure you want to Delete the selected ",u.length," ","reservations?")),r.a.createElement(wa.a,null,r.a.createElement(q.a,{onClick:function(){S(!1)},color:"primary"},"Cancel"),r.a.createElement(q.a,{onClick:function(){u.length>1?(!function(){R.apply(this,arguments)}(),S(!1),m([])):e.firebase.fetchId("bookings",u).remove()},color:"primary",autoFocus:!0},"Confirm"))))}));var Gn=function(e){var t=e.classes,a=e.bookings,l=e.setFilteredBookings,c=Object(n.useState)(""),o=Object(V.a)(c,2),i=o[0],s=o[1],u=Object(n.useState)(""),m=Object(V.a)(u,2),d=m[0],b=m[1],f=Object(n.useState)(""),p=Object(V.a)(f,2),g=p[0],E=p[1],h=Object(n.useState)(""),v=Object(V.a)(h,2),O=v[0],j=v[1],k=Object(n.useState)(""),S=Object(V.a)(k,2),y=S[0],C=S[1],N=Object(n.useState)(""),x=Object(V.a)(N,2),w=x[0],D=x[1];return r.a.createElement(_e.a,{className:t.container},r.a.createElement($.a,{variant:"h5",gutterBottom:!0,className:t.title},"Search Reservations"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=[g,i,d,O,y,w],n=a.filter((function(e){return!(t[0]&&!e.uid.toLowerCase().includes(t[0].toLowerCase()))&&(!(t[1]&&!e.checkInDate.includes(t[1]))&&(!(t[2]&&!e.checkOutDate.includes(t[2]))&&(!(t[3]&&!e.numberOfGuests.includes(t[3]))&&(!(t[4]&&!e.room.roomName.toLowerCase().includes(t[4].toLowerCase()))&&!(t[5]&&!e.status.toLowerCase().includes(t[5].toLowerCase()))))))}));l(n)}},r.a.createElement("div",{className:t.divider},r.a.createElement(Ke.a,{name:"bookingRef",id:"filled-basic",label:"Booking Reference",className:t.textField,variant:"filled",type:"text",onChange:function(e){return E(e.target.value)}}),r.a.createElement(Ke.a,{name:"checkInDate",id:"date",label:"Check In Date",className:t.textField,variant:"filled",type:"date",InputLabelProps:{shrink:!0},onChange:function(e){return s(e.target.value)}}),r.a.createElement(Ke.a,{name:"checkOutDate",id:"date",label:"Check Out Date",type:"date",className:t.textField,variant:"filled",InputLabelProps:{shrink:!0},onChange:function(e){return b(e.target.value)}})),r.a.createElement("div",{className:t.divider},r.a.createElement(Ke.a,{name:"roomName",id:"filled-basic",label:"Room Name",className:t.textField,variant:"filled",type:"text",onChange:function(e){return C(e.target.value)}}),r.a.createElement(Ke.a,{name:"numberOfPeople",id:"filled-margin-none",label:"Number Of Guests",className:t.textField,type:"number",variant:"filled",onChange:function(e){return j(e.target.value)}}),r.a.createElement(xt.a,{variant:"filled",className:t.formControl},r.a.createElement(ga.a,{id:"simple-select-filled-label"},"Status"),r.a.createElement(Ea.a,{labelId:"simple-select-filled-label",id:"simple-select",value:w,onChange:function(e){D(e.target.value)}},r.a.createElement(Ma.a,{value:""},r.a.createElement("em",null,"None")),r.a.createElement(Ma.a,{value:"Started"},"Started"),r.a.createElement(Ma.a,{value:"Booked"},"Booked"),r.a.createElement(Ma.a,{value:"Checked In"},"Checked In"),r.a.createElement(Ma.a,{value:"Complete"},"Complete")))),r.a.createElement("div",{className:t.divider},r.a.createElement(q.a,{className:t.button,color:"secondary",variant:"contained",type:"submit"},"Submit"))))},Mn=Object(ae.a)((function(e){return{table:{minWidth:650},container:{marginTop:e.spacing(2),padding:e.spacing(2)},textField:{marginRight:e.spacing(1),width:"20vw"},divider:{marginBottom:e.spacing(1)},formControl:{marginRight:e.spacing(1),width:"20vw"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));var Ln=kt((function(e){return e&&!!e.roles.ADMIN||e&&!!e.roles.STAFF}))((function(){var e=Object(n.useState)(""),t=Object(V.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),i=Object(V.a)(c,2),s=i[0],u=i[1],m=Object(o.d)((function(e){return{bookings:Object.keys(e.bookingState.bookings||{}).map((function(t){return Object(b.a)(Object(b.a)({},e.bookingState.bookings[t]),{},{uid:t})}))}})).bookings,d=Object(n.useState)(""),f=Object(V.a)(d,2),p=f[0],g=f[1],E=Mn();return Object(n.useEffect)((function(){if(p.length||u(!0),!p.length){g(m),u(!1)}}),[p]),r.a.createElement(We.a,{maxWidth:"xl"},r.a.createElement(Gn,{classes:E,bookings:m,setFilteredBookings:g}),r.a.createElement(Un,{classes:E,bookings:p,error:a,setError:l,loading:s}))})),zn=Object(ae.a)((function(e){return{root:{backgroundColor:e.palette.background.default,height:"100%"}}}));var Wn=Object(M.a)(z,jt)((function(e){var t=zn(),a=Object(o.c)();return Object(n.useEffect)((function(){return e.firebase.fetch("bookings").on("value",(function(e){var t;t=e.val(),a({type:"BOOKINGS_SET",bookings:t})})),e.firebase.fetch("rooms").on("value",(function(e){var t;t=e.val(),a({type:"ROOMS_SET",rooms:t})})),e.firebase.fetch("guests").on("value",(function(e){var t;t=e.val(),a({type:"GUESTS_SET",guests:t})})),function(){e.firebase.fetch("bookings").off(),e.firebase.fetch("rooms").off(),e.firebase.fetch("guests").off()}}),[]),r.a.createElement(We.a,{className:t.root,maxWidth:"xl"},r.a.createElement(U.a,null,r.a.createElement(Ge,null),r.a.createElement(G.a,{exact:!0,path:"/",component:ze}),r.a.createElement(G.a,{path:"/signup",component:qe}),r.a.createElement(G.a,{path:"/signin",component:lt}),r.a.createElement(G.a,{path:"/pw-forget",component:tt}),r.a.createElement(G.a,{path:Y,component:Ct}),r.a.createElement(G.a,{path:"/register",component:Pt}),r.a.createElement(G.a,{exact:!0,path:"/bookings",component:Va}),r.a.createElement(G.a,{exact:!0,path:"/bookings/:id",component:Qa}),r.a.createElement(G.a,{path:"/reservations",component:Ln}),r.a.createElement(G.a,{path:"/activities",component:qa}),r.a.createElement(G.a,{path:"/staff",component:Za}),r.a.createElement(G.a,{path:Z,component:Ba}),r.a.createElement(G.a,{path:"/account",component:an}),r.a.createElement(G.a,{path:"/admin",component:on}),r.a.createElement(G.a,{path:"/guests",component:In})))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(o.a,{store:A},r.a.createElement(W.Provider,{value:new Q},r.a.createElement(s.a,{theme:m},r.a.createElement(i.a,null),r.a.createElement(Wn,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[179,1,2]]]);
//# sourceMappingURL=main.fdc31cb1.chunk.js.map